{
  "$schema": "./schema.json",
  "suite": "CCL List Access - get_list() Function",
  "version": "2.1",
  "description": "Level 4 CCL list access - type-aware list extraction with validation and conversion support using get_list() function",
  "llm_metadata": {
    "llm_description": "Level 4 CCL list access - get_list() function for extracting lists created by duplicate keys or empty keys",
    "complexity_level": "Level 4 (List Access)",
    "prerequisite_tests": ["api-core-ccl-parsing.json", "api-core-ccl-hierarchy.json", "api-core-ccl-integration.json"],
    "related_functions": ["get-list", "get-string", "get-int", "get-bool", "get-float"],
    "implementation_notes": "Level 4 extension for list access. Requires Core CCL (Level 1-3) foundation. Tests list creation via duplicate keys and empty keys, then validates get_list() extraction.",
    "test_count": 22,
    "assertion_count": 88,
    "cross_references": {
      "gleam_implementation": "packages/ccl/src/ccl.gleam#get_list",
      "go_reference": "internal/mock/ccl.go#GetList",
      "documentation": "https://ccl.tylerbutler.com/api-reference#list-access"
    },
    "learning_path": "Requires Core CCL (Level 1-3) → Implement here → api-typed-access.json (other Level 4 functions)"
  },
  "tests": [
    {
      "name": "basic_list_from_duplicates",
      "input": "servers = web1\nservers = web2\nservers = web3",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "servers", "value": "web1"},
            {"key": "servers", "value": "web2"},
            {"key": "servers", "value": "web3"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "servers": ["web1", "web2", "web3"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["servers"],
              "expected": ["web1", "web2", "web3"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "single_item_as_list",
      "input": "item = single",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "item", "value": "single"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "item": "single"
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["item"],
              "expected": ["single"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_enabled",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests single-value coercion to list behavior",
        "conflicts": ["behavior:list_coercion_disabled"]
      }
    },
    {
      "name": "single_item_as_list_reference",
      "input": "item = single",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "item", "value": "single"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "item": "single"
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["item"],
              "error": true,
              "error_message": "Value is not a list"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_disabled",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant behavior: single values should error",
        "conflicts": ["behavior:list_coercion_enabled"]
      }
    },
    {
      "name": "mixed_duplicate_single_keys",
      "input": "ports = 80\nports = 443\nhost = localhost",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "ports", "value": "80"},
            {"key": "ports", "value": "443"},
            {"key": "host", "value": "localhost"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "ports": ["80", "443"],
            "host": "localhost"
          }
        },
        "get_list": {
          "count": 2,
          "cases": [
            {
              "args": ["ports"],
              "expected": ["80", "443"]
            },
            {
              "args": ["host"],
              "expected": ["localhost"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_enabled",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests mixed duplicate and single keys with coercion behavior"
      }
    },
    {
      "name": "mixed_duplicate_single_keys_reference",
      "input": "ports = 80\nports = 443\nhost = localhost",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "ports", "value": "80"},
            {"key": "ports", "value": "443"},
            {"key": "host", "value": "localhost"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "ports": ["443", "80"],
            "host": "localhost"
          }
        },
        "get_list": {
          "count": 2,
          "cases": [
            {
              "args": ["ports"],
              "expected_unordered": ["80", "443"]
            },
            {
              "args": ["host"],
              "error": true,
              "error_message": "Value is not a list"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_disabled",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant: duplicate keys work, single values error",
        "conflicts": ["behavior:list_coercion_enabled"]
      }
    },
    {
      "name": "nested_list_access",
      "input": "database =\n  hosts = primary\n  hosts = secondary\n  port = 5432",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "database", "value": "\n  hosts = primary\n  hosts = secondary\n  port = 5432"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "database": {
              "hosts": ["primary", "secondary"],
              "port": "5432"
            }
          }
        },
        "get_list": {
          "count": 2,
          "cases": [
            {
              "args": ["database", "hosts"],
              "expected": ["primary", "secondary"]
            },
            {
              "args": ["database", "port"],
              "expected": ["5432"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse_value",
          "behavior:list_coercion_enabled",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests nested list access with hierarchical structures (requires advanced object construction)"
      }
    },
    {
      "name": "nested_list_access_reference",
      "input": "database =\n  hosts = primary\n  hosts = secondary\n  port = 5432",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "database", "value": "\n  hosts = primary\n  hosts = secondary\n  port = 5432"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "database": {
              "hosts": ["primary", "secondary"],
              "port": "5432"
            }
          }
        },
        "get_list": {
          "count": 2,
          "cases": [
            {
              "args": ["database", "hosts"],
              "expected_unordered": ["primary", "secondary"]
            },
            {
              "args": ["database", "port"],
              "error": true,
              "error_message": "Value is not a list"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse_value",
          "behavior:list_coercion_disabled",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant nested list access: single values should error",
        "conflicts": ["behavior:list_coercion_enabled"]
      }
    },
    {
      "name": "empty_list",
      "input": "empty_list =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "empty_list", "value": ""}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "empty_list": ""
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["empty_list"],
              "expected": [""]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests empty value coercion to single-element list behavior"
      }
    },
    {
      "name": "empty_list_reference",
      "input": "empty_list =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "empty_list", "value": ""}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "empty_list": ""
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["empty_list"],
              "error": true,
              "error_message": "Value is not a list"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant behavior: empty values should error"
      }
    },
    {
      "name": "list_with_numbers",
      "input": "numbers = 1\nnumbers = 42\nnumbers = -17\nnumbers = 0",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "numbers", "value": "1"},
            {"key": "numbers", "value": "42"},
            {"key": "numbers", "value": "-17"},
            {"key": "numbers", "value": "0"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "numbers": ["1", "42", "-17", "0"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["numbers"],
              "expected": ["1", "42", "-17", "0"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving list behavior for numbers"
      }
    },
    {
      "name": "list_with_numbers_reference",
      "input": "numbers = 1\nnumbers = 42\nnumbers = -17\nnumbers = 0",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "numbers", "value": "1"},
            {"key": "numbers", "value": "42"},
            {"key": "numbers", "value": "-17"},
            {"key": "numbers", "value": "0"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "numbers": ["1", "42", "-17", "0"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["numbers"],
              "expected_unordered": ["1", "42", "-17", "0"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-agnostic list behavior for numbers"
      }
    },
    {
      "name": "list_with_booleans",
      "input": "flags = true\nflags = false\nflags = yes\nflags = no",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "flags", "value": "true"},
            {"key": "flags", "value": "false"},
            {"key": "flags", "value": "yes"},
            {"key": "flags", "value": "no"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "flags": ["true", "false", "yes", "no"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["flags"],
              "expected": ["true", "false", "yes", "no"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving list behavior for booleans"
      }
    },
    {
      "name": "list_with_booleans_reference",
      "input": "flags = true\nflags = false\nflags = yes\nflags = no",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "flags", "value": "true"},
            {"key": "flags", "value": "false"},
            {"key": "flags", "value": "yes"},
            {"key": "flags", "value": "no"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "flags": ["true", "false", "yes", "no"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["flags"],
              "expected_unordered": ["true", "false", "yes", "no"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-agnostic list behavior for booleans"
      }
    },
    {
      "name": "list_with_whitespace",
      "input": "items =   spaced   \nitems = normal\nitems =\nitems =   ",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "items", "value": "spaced"},
            {"key": "items", "value": "normal"},
            {"key": "items", "value": ""},
            {"key": "items", "value": ""}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "items": ["spaced", "normal", "", ""]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["items"],
              "expected": ["spaced", "normal", "", ""]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "feature:whitespace",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving list behavior with whitespace"
      }
    },
    {
      "name": "list_with_whitespace_reference",
      "input": "items =   spaced   \nitems = normal\nitems =\nitems =   ",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "items", "value": "spaced"},
            {"key": "items", "value": "normal"},
            {"key": "items", "value": ""},
            {"key": "items", "value": ""}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "items": ["spaced", "normal"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["items"],
              "expected_unordered": ["spaced", "normal"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "feature:whitespace",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-agnostic list behavior with whitespace"
      }
    },
    {
      "name": "deeply_nested_list",
      "input": "config =\n  environments =\n    production =\n      servers = web1\n      servers = web2\n      servers = api1",
      "validations": {
        "parse": {
          "count": 6,
          "expected": [
            {"key": "config", "value": ""},
            {"key": "environments", "value": ""},
            {"key": "production", "value": ""},
            {"key": "servers", "value": "web1"},
            {"key": "servers", "value": "web2"},
            {"key": "servers", "value": "api1"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "config": {
              "environments": {
                "production": {
                  "servers": ["web1", "web2", "api1"]
                }
              }
            }
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["config", "environments", "production", "servers"],
              "expected": ["web1", "web2", "api1"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving deeply nested list behavior"
      }
    },
    {
      "name": "deeply_nested_list_reference",
      "input": "config =\n  environments =\n    production =\n      servers = web1\n      servers = web2\n      servers = api1",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "config", "value": "\n  environments =\n    production =\n      servers = web1\n      servers = web2\n      servers = api1"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "config": {
              "environments": {
                "production": {
                  "servers": ["web1", "web2", "api1"]
                }
              }
            }
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["config", "environments", "production", "servers"],
              "expected_unordered": ["web1", "web2", "api1"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse_value",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-agnostic deeply nested list behavior"
      }
    },
    {
      "name": "list_with_unicode",
      "input": "names = 张三\nnames = José\nnames = François\nnames = العربية",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "names", "value": "张三"},
            {"key": "names", "value": "José"},
            {"key": "names", "value": "François"},
            {"key": "names", "value": "العربية"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "names": ["张三", "José", "François", "العربية"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["names"],
              "expected": ["张三", "José", "François", "العربية"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "feature:unicode",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving list behavior with unicode"
      }
    },
    {
      "name": "list_with_unicode_reference",
      "input": "names = 张三\nnames = José\nnames = François\nnames = العربية",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "names", "value": "张三"},
            {"key": "names", "value": "José"},
            {"key": "names", "value": "François"},
            {"key": "names", "value": "العربية"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "names": ["张三", "José", "François", "العربية"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["names"],
              "expected_unordered": ["张三", "José", "François", "العربية"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "feature:unicode",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-agnostic list behavior with unicode"
      }
    },
    {
      "name": "list_with_special_characters",
      "input": "symbols = @#$%\nsymbols = !^&*()\nsymbols = []{}|\nsymbols = <>=+",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {"key": "symbols", "value": "@#$%"},
            {"key": "symbols", "value": "!^&*()"},
            {"key": "symbols", "value": "[]{}|"},
            {"key": "symbols", "value": "<>=+"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "symbols": ["@#$%", "!^&*()", "[]{}|", "<>=+"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["symbols"],
              "expected": ["@#$%", "!^&*()", "[]{}|", "<>=+"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests special characters with = in values - requires proposed parser behavior"
      }
    },
    {
      "name": "list_with_special_characters_reference",
      "input": "symbols = @#$%\nsymbols = !^&*()\nsymbols = []{}|",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "symbols", "value": "@#$%"},
            {"key": "symbols", "value": "!^&*()"},
            {"key": "symbols", "value": "[]{}|"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "symbols": ["@#$%", "!^&*()", "[]{}|"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["symbols"],
              "expected_unordered": ["@#$%", "!^&*()", "[]{}|"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference behavior with = in values causing parse split"
      }
    },
    {
      "name": "large_list",
      "input": "items = item01\nitems = item02\nitems = item03\nitems = item04\nitems = item05\nitems = item06\nitems = item07\nitems = item08\nitems = item09\nitems = item10\nitems = item11\nitems = item12\nitems = item13\nitems = item14\nitems = item15\nitems = item16\nitems = item17\nitems = item18\nitems = item19\nitems = item20",
      "validations": {
        "parse": {
          "count": 20,
          "expected": [
            {"key": "items", "value": "item01"}, {"key": "items", "value": "item02"}, {"key": "items", "value": "item03"}, {"key": "items", "value": "item04"}, {"key": "items", "value": "item05"},
            {"key": "items", "value": "item06"}, {"key": "items", "value": "item07"}, {"key": "items", "value": "item08"}, {"key": "items", "value": "item09"}, {"key": "items", "value": "item10"},
            {"key": "items", "value": "item11"}, {"key": "items", "value": "item12"}, {"key": "items", "value": "item13"}, {"key": "items", "value": "item14"}, {"key": "items", "value": "item15"},
            {"key": "items", "value": "item16"}, {"key": "items", "value": "item17"}, {"key": "items", "value": "item18"}, {"key": "items", "value": "item19"}, {"key": "items", "value": "item20"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "items": ["item01", "item02", "item03", "item04", "item05", "item06", "item07", "item08", "item09", "item10",
                     "item11", "item12", "item13", "item14", "item15", "item16", "item17", "item18", "item19", "item20"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["items"],
              "expected": ["item01", "item02", "item03", "item04", "item05", "item06", "item07", "item08", "item09", "item10",
                          "item11", "item12", "item13", "item14", "item15", "item16", "item17", "item18", "item19", "item20"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "performance-test"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_with_comments",
      "input": "servers = web1\n/= Production servers\nservers = web2\nservers = web3\n/= End of list",
      "validations": {
        "parse": {
          "count": 5,
          "expected": [
            {"key": "servers", "value": "web1"},
            {"key": "/", "value": "Production servers"},
            {"key": "servers", "value": "web2"},
            {"key": "servers", "value": "web3"},
            {"key": "/", "value": "End of list"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "servers": ["web1", "web2", "web3"],
            "/": ["Production servers", "End of list"]
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["servers"],
              "expected": ["web1", "web2", "web3"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "feature:comments"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "dotted_key_list",
      "input": "database.hosts = primary\ndatabase.hosts = secondary\ndatabase.port = 5432",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "database.hosts", "value": "primary"},
            {"key": "database.hosts", "value": "secondary"},
            {"key": "database.port", "value": "5432"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "database": {
              "hosts": ["primary", "secondary"],
              "port": "5432"
            }
          }
        },
        "get_list": {
          "count": 2,
          "cases": [
            {
              "args": ["database", "hosts"],
              "expected": ["primary", "secondary"]
            },
            {
              "args": ["database", "port"],
              "expected": ["5432"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "function:expand_dotted",
          "feature:dotted_keys"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_error_missing_key",
      "input": "existing = value",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "existing", "value": "value"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "existing": "value"
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["missing"],
              "error": true,
              "error_message": "key not found: missing"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_error_nested_missing_key",
      "input": "config =\n  server = web1",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "config", "value": "\n  server = web1"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "config": {
              "server": "web1"
            }
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["config", "missing"],
              "error": true,
              "error_message": "key not found: config.missing"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_error_non_object_path",
      "input": "value = simple",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "value", "value": "simple"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "value": "simple"
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["value", "nested"],
              "error": true,
              "error_message": "not an object at key: value"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_multiline_values",
      "input": "descriptions = First line\nsecond line\ndescriptions = Another item\ndescriptions = Third item",
      "validations": {
        "parse_value": {
          "count": 4,
          "expected": [
            {"key": "descriptions", "value": "First line"},
            {"key": "second line", "value": ""},
            {"key": "descriptions", "value": "Another item"},
            {"key": "descriptions", "value": "Third item"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "descriptions": ["First line", "Another item", "Third item"],
            "second line": ""
          }
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["descriptions"],
              "expected": ["First line", "Another item", "Third item"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy", 
          "function:parse_value",
          "feature:multiline",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests unindented multiline continuation - requires proposed behavior"
      }
    },
    {
      "name": "complex_mixed_list_scenarios",
      "input": "config =\n  servers = web1\n  servers = web2\n  database =\n    hosts = primary\n    hosts = backup\n    port = 5432\n  cache = redis\nfeatures = auth\nfeatures = api\nfeatures = ui",
      "validations": {
        "parse_value": {
          "count": 11,
          "expected": [
            {"key": "config", "value": ""},
            {"key": "servers", "value": "web1"},
            {"key": "servers", "value": "web2"},
            {"key": "database", "value": ""},
            {"key": "hosts", "value": "primary"},
            {"key": "hosts", "value": "backup"},
            {"key": "port", "value": "5432"},
            {"key": "cache", "value": "redis"},
            {"key": "features", "value": "auth"},
            {"key": "features", "value": "api"},
            {"key": "features", "value": "ui"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "config": {
              "servers": ["web1", "web2"],
              "database": {
                "hosts": ["primary", "backup"],
                "port": "5432"
              },
              "cache": "redis"
            },
            "features": ["auth", "api", "ui"]
          }
        },
        "get_list": {
          "count": 4,
          "cases": [
            {
              "args": ["config", "servers"],
              "expected": ["web1", "web2"]
            },
            {
              "args": ["config", "database", "hosts"],
              "expected": ["primary", "backup"]
            },
            {
              "args": ["config", "cache"],
              "expected": ["redis"]
            },
            {
              "args": ["features"],
              "expected": ["auth", "api", "ui"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse_value",
          "behavior:list_coercion_enabled",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests order-preserving complex nested list scenarios"
      }
    },
    {
      "name": "complex_mixed_list_scenarios_reference",
      "input": "config =\n  servers = web1\n  servers = web2\n  database =\n    hosts = primary\n    hosts = backup\n    port = 5432\n  cache = redis\nfeatures = auth\nfeatures = api\nfeatures = ui",
      "validations": {
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "config": {
              "servers": ["web2", "web1"],
              "database": {
                "hosts": ["backup", "primary"],
                "port": "5432"
              },
              "cache": "redis"
            },
            "features": ["api", "auth", "ui"]
          }
        },
        "get_list": {
          "count": 4,
          "cases": [
            {
              "args": ["config", "servers"],
              "expected_unordered": ["web1", "web2"]
            },
            {
              "args": ["config", "database", "hosts"],
              "expected_unordered": ["primary", "backup"]
            },
            {
              "args": ["config", "cache"],
              "error": true,
              "error_message": "Value is not a list"
            },
            {
              "args": ["features"],
              "expected_unordered": ["auth", "api", "ui"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse_value",
          "behavior:list_coercion_disabled",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant complex nested list scenarios: single values should error",
        "conflicts": ["behavior:list_coercion_enabled"]
      }
    },
    {
      "name": "list_edge_case_zero_length",
      "input": "",
      "validations": {
        "parse": {
          "count": 1,
          "expected": []
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {}
        },
        "get_list": {
          "count": 1,
          "cases": [
            {
              "args": ["nonexistent"],
              "error": true,
              "error_message": "key not found: nonexistent"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "empty-input-test"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "list_path_traversal_protection",
      "input": "safe = value",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "safe", "value": "value"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "safe": "value"
          }
        },
        "get_list": {
          "count": 3,
          "cases": [
            {
              "args": [""],
              "error": true,
              "error_message": "invalid path"
            },
            {
              "args": [],
              "error": true,
              "error_message": "invalid path"
            },
            {
              "args": ["safe"],
              "expected": ["value"]
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_enabled",
          "security-test",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests path traversal protection with single-value coercion"
      }
    },
    {
      "name": "list_path_traversal_protection_reference",
      "input": "safe = value",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "safe", "value": "value"}
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "safe": "value"
          }
        },
        "get_list": {
          "count": 3,
          "cases": [
            {
              "args": [""],
              "error": true,
              "error_message": "invalid path"
            },
            {
              "args": [],
              "error": true,
              "error_message": "invalid path"
            },
            {
              "args": ["safe"],
              "error": true,
              "error_message": "Value is not a list"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_list",
          "function:build_hierarchy",
          "function:parse",
          "behavior:list_coercion_disabled",
          "security-test",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "description": "Tests reference-compliant path traversal protection without coercion",
        "conflicts": ["behavior:list_coercion_enabled"]
      }
    }
  ]
}