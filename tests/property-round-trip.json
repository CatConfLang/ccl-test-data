{
  "$schema": "./schema.json",
  "suite": "CCL Pretty Printer (Validation Format)",
  "version": "2.0",
  "description": "Pretty printing and round-trip testing - ensures canonical formatting and parse/pretty-print/parse identity",
  "tests": [
    {
      "name": "round_trip_basic",
      "input": "key = value\nnested =\n  sub = val",
      "validations": {
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "round_trip_whitespace_normalization",
      "input": "  key  =  value  \n  nested  = \n    sub  =  val  ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "key", "value": "value  \n  nested  = \n    sub  =  val"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:whitespace",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "round_trip_empty_keys_lists",
      "input": "= item1\n= item2\nregular = value",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "", "value": "item1"},
            {"key": "", "value": "item2"},
            {"key": "regular", "value": "value"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:empty_keys",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "round_trip_nested_structures",
      "input": "config =\n  host = localhost\n  port = 8080\n  db =\n    name = mydb\n    user = admin",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "config", "value": "\n  host = localhost\n  port = 8080\n  db =\n    name = mydb\n    user = admin"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "function:build_hierarchy",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "round_trip_multiline_values",
      "input": "script =\n  #!/bin/bash\n  echo hello\n  exit 0",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "script", "value": "\n  #!/bin/bash\n  echo hello\n  exit 0"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:multiline",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "round_trip_mixed_content",
      "input": "name = Alice\n= first item\nconfig =\n  port = 3000\n= second item\nfinal = value",
      "validations": {
        "parse": {
          "count": 5,
          "expected": [
            {"key": "name", "value": "Alice"},
            {"key": "", "value": "first item"},
            {"key": "config", "value": "\n  port = 3000"},
            {"key": "", "value": "second item"},
            {"key": "final", "value": "value"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:empty_keys",
          "function:build_hierarchy",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "canonical_format_empty_values",
      "input": "empty_key =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "empty_key", "value": ""}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "empty_key ="
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "canonical_format_tab_preservation",
      "input": "value_with_tabs = text\t\twith\ttabs\t",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "value_with_tabs", "value": "text\t\twith\ttabs\t"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "value_with_tabs = text\t\twith\ttabs"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "behavior:tabs_preserve",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:tabs_to_spaces",
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "canonical_format_unicode",
      "input": "unicode = ä½ å¥½ä¸–ç•Œ\nemo = ðŸŒŸâœ¨",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {"key": "unicode", "value": "ä½ å¥½ä¸–ç•Œ"},
            {"key": "emo", "value": "ðŸŒŸâœ¨"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "unicode = ä½ å¥½ä¸–ç•Œ\nemo = ðŸŒŸâœ¨"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:unicode",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "round_trip_complex_nesting",
      "input": "app =\n  = item1\n  config =\n    = nested_item\n    db =\n      host = localhost\n      = db_item\n  = item2",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "app", "value": "\n  = item1\n  config =\n    = nested_item\n    db =\n      host = localhost\n      = db_item\n  = item2"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:empty_keys",
          "function:build_hierarchy",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "canonical_format_line_endings_proposed",
      "input": "key1 = value1\r\nkey2 = value2\r\n",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {"key": "key1", "value": "value1"},
            {"key": "key2", "value": "value2"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "key1 = value1\nkey2 = value2"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "behavior:crlf_preserve_literal",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:crlf_normalize_to_lf",
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "crlf_normalize_to_lf_proposed",
      "input": "key1 = value1\r\nkey2 = value2\r\n",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {"key": "key1", "value": "value1"},
            {"key": "key2", "value": "value2"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "key1 = value1\nkey2 = value2"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "behavior:crlf_normalize_to_lf",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:crlf_preserve_literal",
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "crlf_normalize_to_lf_reference",
      "input": "key1 = value1\r\nkey2 = value2\r\n",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "key1 =\n  value1 =\nkey2 =\n  value2 =\n"
        }
      },
      "meta": {
        "tags": [
          "behavior:crlf_normalize_to_lf",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:crlf_preserve_literal",
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "round_trip_deeply_nested",
      "input": "level1 =\n  level2 =\n    level3 =\n      level4 =\n        deep = value\n        = deep_item",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {"key": "level1", "value": "\n  level2 =\n    level3 =\n      level4 =\n        deep = value\n        = deep_item"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:empty_keys",
          "function:build_hierarchy",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "canonical_format_consistent_spacing",
      "input": "key1=value1\nkey2  =  value2\nkey3\t=\tvalue3",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "key1", "value": "value1"},
            {"key": "key2", "value": "value2"},
            {"key": "key3", "value": "\tvalue3"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "key1 = value1\nkey2 = value2\nkey3 = \tvalue3"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "behavior:strict_spacing",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:loose_spacing",
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "round_trip_empty_multiline",
      "input": "empty_section =\n\nother = value",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {"key": "empty_section", "value": ""},
            {"key": "other", "value": "value"}
          ]
        },
        "round_trip": {
          "count": 1,
          "property": "identity"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "feature:empty_keys",
          "feature:multiline",
          "function:pretty_print"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "deterministic_output",
      "input": "z = last\na = first\nm = middle",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {"key": "z", "value": "last"},
            {"key": "a", "value": "first"},
            {"key": "m", "value": "middle"}
          ]
        },
        "canonical_format": {
          "count": 1,
          "expected": "z = last\na = first\nm = middle"
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "function:pretty_print",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "variant:reference_compliant"
        ]
      }
    },
    {
      "name": "canonical_format_empty_values_ocaml_reference",
      "input": "empty_key =",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "empty_key =\n"
        }
      },
      "meta": {
        "tags": [
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "canonical_format_tab_preservation_ocaml_reference",
      "input": "value_with_tabs = text\t\twith\ttabs\t",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "value_with_tabs =\n  text\t\twith\ttabs =\n"
        }
      },
      "meta": {
        "tags": [
          "behavior:tabs_preserve",
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:tabs_to_spaces"
        ]
      }
    },
    {
      "name": "canonical_format_unicode_ocaml_reference",
      "input": "unicode = ä½ å¥½ä¸–ç•Œ\nemo = ðŸŒŸâœ¨",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "emo =\n  ðŸŒŸâœ¨ =\nunicode =\n  ä½ å¥½ä¸–ç•Œ =\n"
        }
      },
      "meta": {
        "tags": [
          "feature:unicode",
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    },
    {
      "name": "canonical_format_line_endings_reference_behavior",
      "input": "key1 = value1\r\nkey2 = value2\r\n",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "key1 =\n  value1 =\nkey2 =\n  value2 =\n"
        }
      },
      "meta": {
        "tags": [
          "behavior:crlf_preserve_literal",
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:crlf_normalize_to_lf",
          "variant:proposed_behavior"
        ]
      }
    },
    {
      "name": "canonical_format_consistent_spacing_ocaml_reference",
      "input": "key1=value1\nkey2  =  value2\nkey3\t=\tvalue3",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "key1 =\n  value1 =\nkey2 =\n  value2 =\nkey3 =\n  value3 =\n"
        }
      },
      "meta": {
        "tags": [
          "behavior:strict_spacing",
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing",
        "conflicts": [
          "behavior:loose_spacing"
        ]
      }
    },
    {
      "name": "deterministic_output_ocaml_reference",
      "input": "z = last\na = first\nm = middle",
      "validations": {
        "canonical_format": {
          "count": 1,
          "expected": "a =\n  first =\nm =\n  middle =\nz =\n  last =\n"
        }
      },
      "meta": {
        "tags": [
          "function:pretty_print",
          "variant:reference_compliant"
        ],
        "level": 4,
        "feature": "pretty_printing"
      }
    }
  ]
}
