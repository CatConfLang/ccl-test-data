{
  "$schema": "../schema.json",
  "suite": "CCL Object Construction",
  "version": "1.0", 
  "description": "Converting flat Entry[] to nested objects via make_objects() - essential for hierarchical access",
  "tests": [
    {
      "name": "recursive_nested_single",
      "input": "database =\n  enabled = true",
      "expected_flat": [
        {"key": "database", "value": "\n  enabled = true"}
      ],
      "expected_nested": {
        "database": {
          "enabled": "true"
        }
      },
      "meta": {"tags": ["recursive", "nested", "basic"], "level": 3}
    },
    {
      "name": "recursive_nested_multiple",
      "input": "database =\n  host = localhost\n  port = 5432\n  enabled = true",
      "expected_flat": [
        {"key": "database", "value": "\n  host = localhost\n  port = 5432\n  enabled = true"}
      ],
      "expected_nested": {
        "database": {
          "host": "localhost",
          "port": "5432", 
          "enabled": "true"
        }
      },
      "meta": {"tags": ["recursive", "nested", "multiple"], "level": 3}
    },
    {
      "name": "deep_recursive_nesting",
      "input": "server =\n  database =\n    host = localhost\n    port = 5432\n  cache =\n    enabled = true",
      "expected_flat": [
        {"key": "server", "value": "\n  database =\n    host = localhost\n    port = 5432\n  cache =\n    enabled = true"}
      ],
      "expected_nested": {
        "server": {
          "database": {
            "host": "localhost",
            "port": "5432"
          },
          "cache": {
            "enabled": "true"
          }
        }
      },
      "meta": {"tags": ["recursive", "nested", "deep"], "level": 3}
    },
    {
      "name": "multiple_keys_same_name_merge",
      "input": "user =\n  name = alice\nuser =\n  age = 25",
      "expected_flat": [
        {"key": "user", "value": "\n  name = alice"},
        {"key": "user", "value": "\n  age = 25"}
      ],
      "expected_nested": {
        "user": {
          "name": "alice",
          "age": "25"
        }
      },
      "meta": {"tags": ["merge", "duplicate-keys", "object-construction"], "level": 3}
    },
    {
      "name": "empty_key_list_style",
      "input": "ports =\n  = 8000\n  = 8001\n  = 8002",
      "expected_flat": [
        {"key": "ports", "value": "\n  = 8000\n  = 8001\n  = 8002"}
      ],
      "expected_nested": {
        "ports": {
          "": ["8000", "8001", "8002"]
        }
      },
      "meta": {"tags": ["empty-key", "lists", "array-style"], "level": 3}
    },
    {
      "name": "empty_key_top_level",
      "input": "= root_value\nkey = normal\n= another_root",
      "expected_flat": [
        {"key": "", "value": "root_value"},
        {"key": "key", "value": "normal"},
        {"key": "", "value": "another_root"}
      ],
      "expected_nested": {
        "": ["root_value", "another_root"],
        "key": "normal"
      },
      "meta": {"tags": ["empty-key", "top-level", "merge"], "level": 3}
    },
    {
      "name": "mixed_flat_and_nested",
      "input": "simple = value\nnested =\n  key1 = val1\n  key2 = val2\nanother = simple",
      "expected_flat": [
        {"key": "simple", "value": "value"},
        {"key": "nested", "value": "\n  key1 = val1\n  key2 = val2"},
        {"key": "another", "value": "simple"}
      ],
      "expected_nested": {
        "simple": "value",
        "nested": {
          "key1": "val1",
          "key2": "val2"
        },
        "another": "simple"
      },
      "meta": {"tags": ["mixed", "flat", "nested"], "level": 3}
    },
    {
      "name": "stress_test_complex_nesting",
      "input": "/ = This is a CCL document\ntitle = CCL Example\n\ndatabase =\n  enabled = true\n  ports =\n    = 8000\n    = 8001\n    = 8002\n  limits =\n    cpu = 1500mi\n    memory = 10Gb\n\nuser =\n  guestId = 42\n\nuser =\n  login = chshersh\n  createdAt = 2024-12-31",
      "expected_flat": [
        {"key": "/", "value": "This is a CCL document"},
        {"key": "title", "value": "CCL Example"},
        {"key": "database", "value": "\n  enabled = true\n  ports =\n    = 8000\n    = 8001\n    = 8002\n  limits =\n    cpu = 1500mi\n    memory = 10Gb"},
        {"key": "user", "value": "\n  guestId = 42"},
        {"key": "user", "value": "\n  login = chshersh\n  createdAt = 2024-12-31"}
      ],
      "expected_nested": {
        "/": "This is a CCL document",
        "title": "CCL Example",
        "database": {
          "enabled": "true",
          "ports": {
            "": ["8000", "8001", "8002"]
          },
          "limits": {
            "cpu": "1500mi",
            "memory": "10Gb"
          }
        },
        "user": {
          "guestId": "42",
          "login": "chshersh",
          "createdAt": "2024-12-31"
        }
      },
      "meta": {"tags": ["stress", "complex", "merge", "empty-key", "comments"], "level": 3}
    }
  ]
}