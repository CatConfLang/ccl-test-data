{
  "$schema": "./schema.json",
  "suite": "CCL Edge Cases - Validation Format",
  "version": "2.1",
  "description": "Cross-level edge cases, stress tests, and production validation - whitespace variations, unicode, complex scenarios spanning all levels.",
  "llm_metadata": {
    "llm_description": "Cross-level CCL edge cases and stress tests - production validation covering whitespace, unicode, and complex scenarios across all implementation levels",
    "complexity_level": "Cross-Level (Edge Cases)",
    "prerequisite_tests": ["api-core-ccl-parsing.json", "api-core-ccl-hierarchy.json", "api-core-ccl-integration.json"],
    "related_functions": ["parse", "load"],
    "implementation_notes": "Cross-level stress testing. Validates implementation robustness across edge cases, unicode, whitespace, and complex scenarios. Production validation.",
    "test_count": 33,
    "assertion_count": 47,
    "cross_references": {
      "gleam_implementation": "packages/ccl/src/ccl.gleam#parse",
      "go_reference": "internal/mock/ccl.go#Parse",
      "documentation": "https://ccl.tylerbutler.com/api-reference#parsing"
    },
    "learning_path": "After Core CCL implementation complete â†’ validate production readiness with stress tests"
  },
  "tests": [
    {
      "name": "basic_single_no_spaces",
      "input": "key=val",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "basic_with_spaces",
      "input": "key = val",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "indented_key",
      "input": "  key = val",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse-value"
        ],
        "level": 2,
        "feature": "parsing"
      }
    },
    {
      "name": "value_trailing_spaces",
      "input": "key = val  ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "key_value_surrounded_spaces",
      "input": "  key  =  val  ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "surrounded_by_newlines",
      "input": "\nkey = val\n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "key_empty_value",
      "input": "key =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_value_with_newline",
      "input": "key =\n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_value_with_spaces",
      "input": "key =  ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_key_indented",
      "input": "  = val",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "function:parse-value"
        ],
        "level": 2,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_key_with_newline",
      "input": "\n  = val",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_key_value_with_spaces",
      "input": "  =  ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "equals_in_value_no_spaces",
      "input": "a=b=c",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "a",
              "value": "b=c"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "equals_in_value_with_spaces",
      "input": "a = b = c",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "a",
              "value": "b = c"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "multiple_key_value_pairs",
      "input": "key1 = val1\nkey2 = val2",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {
              "key": "key1",
              "value": "val1"
            },
            {
              "key": "key2",
              "value": "val2"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "key_with_tabs",
      "input": "\tkey\t=\tvalue",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "\tvalue"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:tabs-preserve",
          "feature:whitespace",
          "function:parse",
          "variant:proposed-behavior"
        ],
        "level": 1,
        "feature": "parsing",
        "conflicts": [
          "behavior:tabs-to-spaces",
          "variant:reference-compliant"
        ]
      }
    },
    {
      "name": "key_with_tabs_ocaml_reference",
      "input": "\tkey\t=\tvalue",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:tabs-preserve",
          "feature:whitespace",
          "function:parse",
          "variant:reference-compliant"
        ],
        "level": 1,
        "feature": "parsing",
        "conflicts": [
          "behavior:tabs-to-spaces",
          "variant:proposed-behavior"
        ]
      }
    },
    {
      "name": "whitespace_only_value",
      "input": "onlyspaces =     ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "onlyspaces",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "spaces_vs_tabs_continuation",
      "input": "text = First\n    four spaces\n\ttab preserved",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "text",
              "value": "First\n    four spaces\n\ttab preserved"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:tabs-preserve",
          "feature:whitespace",
          "function:parse-value",
          "variant:proposed-behavior"
        ],
        "level": 2,
        "feature": "parsing",
        "conflicts": [
          "behavior:tabs-to-spaces",
          "variant:reference-compliant"
        ]
      }
    },
    {
      "name": "spaces_vs_tabs_continuation_ocaml_reference",
      "input": "text = First\n    four spaces\n\ttab preserved",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "text",
              "value": "First\n    four spaces\n tab preserved"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:tabs-preserve",
          "feature:whitespace",
          "function:parse-value",
          "variant:reference-compliant"
        ],
        "level": 2,
        "feature": "parsing",
        "conflicts": [
          "behavior:tabs-to-spaces"
        ]
      }
    },
    {
      "name": "multiple_empty_equality",
      "input": " =  = ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "",
              "value": "="
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "key_with_newline_before_equals",
      "input": "key \n= val\n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "complex_multi_newline_whitespace",
      "input": "  \n key  \n=  val  \n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_value_with_trailing_spaces_newline",
      "input": "key =  \n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "empty_key_value_with_surrounding_newlines",
      "input": "\n  =  \n",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "",
              "value": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:empty-keys",
          "feature:whitespace",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "quotes_treated_as_literal_unquoted",
      "input": "host = localhost",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "host",
              "value": "localhost"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "quotes_treated_as_literal_quoted",
      "input": "host = \"localhost\"",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "host",
              "value": "\"localhost\""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "nested_single_line",
      "input": "key =\n  val",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "\n  val"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:build-hierarchy",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "nested_multi_line",
      "input": "key =\n  line1\n  line2",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "\n  line1\n  line2"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:multiline",
          "function:build-hierarchy",
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "nested_with_blank_line",
      "input": "key =\n  line1\n\n  line2",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "\n  line1\n\n  line2"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:multiline",
          "function:build-hierarchy",
          "function:parse-value"
        ],
        "level": 2,
        "feature": "parsing"
      }
    },
    {
      "name": "deep_nested_structure",
      "input": "key =\n  field1 = value1\n  field2 =\n    subfield = x\n    another = y",
      "validations": {
        "parse_value": {
          "count": 1,
          "expected": [
            {
              "key": "key",
              "value": "\n  field1 = value1\n  field2 =\n    subfield = x\n    another = y"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:build-hierarchy",
          "function:parse-value"
        ],
        "level": 2,
        "feature": "parsing"
      }
    },
    {
      "name": "realistic_stress_test",
      "input": "name = Dmitrii Kovanikov\nlogin = chshersh\nlanguage = OCaml\ndate = 2024-05-25",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {
              "key": "name",
              "value": "Dmitrii Kovanikov"
            },
            {
              "key": "login",
              "value": "chshersh"
            },
            {
              "key": "language",
              "value": "OCaml"
            },
            {
              "key": "date",
              "value": "2024-05-25"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "parsing"
      }
    },
    {
      "name": "ocaml_stress_test_original",
      "input": "/= This is a CCL document\ntitle = CCL Example\n\ndatabase =\n  enabled = true\n  ports =\n    = 8000\n    = 8001\n    = 8002\n  limits =\n    cpu = 1500mi\n    memory = 10Gb\n\nuser =\n  guestId = 42\n\nuser =\n  login = chshersh\n  createdAt = 2024-12-31",
      "validations": {
        "parse": {
          "count": 5,
          "expected": [
            {
              "key": "/",
              "value": "This is a CCL document"
            },
            {
              "key": "title",
              "value": "CCL Example"
            },
            {
              "key": "database",
              "value": "\n  enabled = true\n  ports =\n    = 8000\n    = 8001\n    = 8002\n  limits =\n    cpu = 1500mi\n    memory = 10Gb"
            },
            {
              "key": "user",
              "value": "\n  guestId = 42"
            },
            {
              "key": "user",
              "value": "\n  login = chshersh\n  createdAt = 2024-12-31"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "/": "This is a CCL document",
            "title": "CCL Example",
            "database": {
              "enabled": "true",
              "ports": {
                "": [
                  "8000",
                  "8001",
                  "8002"
                ]
              },
              "limits": {
                "cpu": "1500mi",
                "memory": "10Gb"
              }
            },
            "user": {
              "guestId": "42",
              "login": "chshersh",
              "createdAt": "2024-12-31"
            }
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "title"
              ],
              "expected": "CCL Example"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:comments",
          "feature:empty-keys",
          "function:get-string",
          "function:build-hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "parsing"
      }
    }
  ]
}
