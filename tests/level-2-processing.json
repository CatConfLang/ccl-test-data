{
  "suite": "CCL Entry Processing", 
  "version": "1.0",
  "description": "Level 2: Processing Entry[] to filtered/grouped Entry[] - comments, filtering, composition",
  "tests": [
    {
      "name": "comment_extension",
      "input": "/= This is an environment section\nport = 8080\nserve = index.html\n/= Database section\nmode = in-memory\nconnections = 16",
      "expected": [
        {"key": "/", "value": "This is an environment section"},
        {"key": "port", "value": "8080"},
        {"key": "serve", "value": "index.html"},
        {"key": "/", "value": "Database section"},
        {"key": "mode", "value": "in-memory"},
        {"key": "connections", "value": "16"}
      ],
      "meta": {"tags": ["comments", "extension"], "level": 2}
    },
    {
      "name": "comment_syntax_slash_equals",
      "input": "/= this is a comment",
      "expected": [
        {"key": "/", "value": "this is a comment"}
      ],
      "meta": {"tags": ["comment", "special-syntax"], "level": 2}
    },
    {
      "name": "composition_stability_duplicate_keys",
      "input": "a = 1\nb = 2\nb = 20\nc = 3",
      "expected": [
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"},
        {"key": "b", "value": "20"},
        {"key": "c", "value": "3"}
      ],
      "meta": {"tags": ["composition", "duplicate-keys"], "level": 2}
    },
    {
      "name": "multiple_values_same_key",
      "input": "ports = 8000\nports = 8001\nports = 8002",
      "expected": [
        {"key": "ports", "value": "8000"},
        {"key": "ports", "value": "8001"},
        {"key": "ports", "value": "8002"}
      ],
      "meta": {"tags": ["duplicate-keys", "multiple-values"], "level": 2}
    },
    {
      "name": "list_with_empty_keys",
      "input": "= 3\n= 1\n= 2",
      "expected": [
        {"key": "", "value": "3"},
        {"key": "", "value": "1"},
        {"key": "", "value": "2"}
      ],
      "meta": {"tags": ["lists", "empty-key"], "level": 2}
    },
    {
      "name": "section_style_syntax",
      "input": "== Section 2 ==",
      "expected": [
        {"key": "", "value": "= Section 2 =="}
      ],
      "meta": {"tags": ["section", "empty-key", "special-syntax"], "level": 2}
    },
    {
      "name": "composition_stability_ab",
      "input": "a = 1\nb = 2\nb = 20\nc = 3",
      "expected": [
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"},
        {"key": "b", "value": "20"},
        {"key": "c", "value": "3"}
      ],
      "meta": {"tags": ["composition", "duplicate-keys", "redundant"], "level": 2}
    },
    {
      "name": "composition_stability_ba",
      "input": "b = 20\nc = 3\na = 1\nb = 2",
      "expected": [
        {"key": "b", "value": "20"},
        {"key": "c", "value": "3"},
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"}
      ],
      "meta": {"tags": ["composition", "duplicate-keys", "redundant"], "level": 2}
    },
    {
      "name": "multiple_values_same_key_ports",
      "input": "ports = 8000\nports = 8001\nports = 8002",
      "expected": [
        {"key": "ports", "value": "8000"},
        {"key": "ports", "value": "8001"},
        {"key": "ports", "value": "8002"}
      ],
      "meta": {"tags": ["duplicate-keys", "multiple-values", "redundant"], "level": 2}
    },
    {
      "name": "mixed_keys_with_duplicates",
      "input": "name = app\nports = 8000\nname = service\nports = 8001",
      "expected": [
        {"key": "name", "value": "app"},
        {"key": "ports", "value": "8000"},
        {"key": "name", "value": "service"},
        {"key": "ports", "value": "8001"}
      ],
      "meta": {"tags": ["duplicate-keys", "mixed", "redundant"], "level": 2}
    },
    {
      "name": "array_style_list",
      "input": "1 =\n2 =\n3 =",
      "expected": [
        {"key": "1", "value": ""},
        {"key": "2", "value": ""},
        {"key": "3", "value": ""}
      ],
      "meta": {"tags": ["lists", "empty-value", "redundant"], "level": 2}
    },
    {
      "name": "section_header_double_equals",
      "input": "== Database Config ==\nhost = localhost\nport = 5432",
      "expected": [
        {"key": "", "value": "= Database Config =="},
        {"key": "host", "value": "localhost"},
        {"key": "port", "value": "5432"}
      ],
      "meta": {"tags": ["section-headers", "keyless-values"], "level": 2}
    },
    {
      "name": "section_header_triple_equals",
      "input": "=== Server Settings ===\nhost = 0.0.0.0\nssl = true",
      "expected": [
        {"key": "", "value": "== Server Settings ==="},
        {"key": "host", "value": "0.0.0.0"},
        {"key": "ssl", "value": "true"}
      ],
      "meta": {"tags": ["section-headers", "keyless-values"], "level": 2}
    },
    {
      "name": "multiple_sections_with_entries",
      "input": "== Database ==\nhost = localhost\n\n=== Cache ===\nredis = enabled\n\n== Logging ==\nlevel = info",
      "expected": [
        {"key": "", "value": "= Database =="},
        {"key": "host", "value": "localhost"},
        {"key": "", "value": "== Cache ==="},
        {"key": "redis", "value": "enabled"},
        {"key": "", "value": "= Logging =="},
        {"key": "level", "value": "info"}
      ],
      "meta": {"tags": ["section-headers", "multiple-sections"], "level": 2}
    },
    {
      "name": "section_headers_mixed_with_lists",
      "input": "== Configuration ==\n= item1\n= item2\nkey = value\n=== Next Section ===\nother = data",
      "expected": [
        {"key": "", "value": "= Configuration =="},
        {"key": "", "value": "item1"},
        {"key": "", "value": "item2"},
        {"key": "key", "value": "value"},
        {"key": "", "value": "== Next Section ==="},
        {"key": "other", "value": "data"}
      ],
      "meta": {"tags": ["section-headers", "lists", "mixed-content"], "level": 2}
    },
    {
      "name": "empty_section_header_only",
      "input": "== Empty Section ==",
      "expected": [
        {"key": "", "value": "= Empty Section =="}
      ],
      "meta": {"tags": ["section-headers", "empty-section"], "level": 2}
    },
    {
      "name": "section_header_at_end",
      "input": "key = value\n== Final Section ==",
      "expected": [
        {"key": "key", "value": "value"},
        {"key": "", "value": "= Final Section =="}
      ],
      "meta": {"tags": ["section-headers", "end-of-file"], "level": 2}
    },
    {
      "name": "section_headers_no_trailing_equals",
      "input": "== Database Config\nhost = localhost\n=== Server Settings\nport = 8080",
      "expected": [
        {"key": "", "value": "= Database Config"},
        {"key": "host", "value": "localhost"},
        {"key": "", "value": "== Server Settings"},
        {"key": "port", "value": "8080"}
      ],
      "meta": {"tags": ["section-headers", "asymmetric-equals"], "level": 2}
    },
    {
      "name": "section_headers_with_colons",
      "input": "== Database: Production ==\nhost = db.prod.com\n=== Cache: Redis Config ===\nport = 6379",
      "expected": [
        {"key": "", "value": "= Database: Production =="},
        {"key": "host", "value": "db.prod.com"},
        {"key": "", "value": "== Cache: Redis Config ==="},
        {"key": "port", "value": "6379"}
      ],
      "meta": {"tags": ["section-headers", "colon-convention", "user-text"], "level": 2}
    },
    {
      "name": "spaced_equals_not_section_header",
      "input": "= = spaced equals\n=  = wide spaces\n== Real Header ==\nkey = value",
      "expected": [
        {"key": "", "value": "= spaced equals"},
        {"key": "", "value": "= wide spaces"},
        {"key": "", "value": "= Real Header =="},
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["section-headers", "spacing-edge-cases", "list-items"], "level": 2}
    },
    {
      "name": "consecutive_section_headers",
      "input": "== First Section ==\n=== Nested Section ===\n==== Deep Section ====\nkey = value",
      "expected": [
        {"key": "", "value": "= First Section =="},
        {"key": "", "value": "== Nested Section ==="},
        {"key": "", "value": "=== Deep Section ===="},
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["section-headers", "consecutive", "hierarchical"], "level": 2}
    },
    {
      "name": "section_headers_with_comments",
      "input": "== Database Config ==\n/= Connection settings\nhost = localhost\n=== Cache Config ===\n/= Redis configuration\nport = 6379",
      "expected": [
        {"key": "", "value": "= Database Config =="},
        {"key": "/", "value": "Connection settings"},
        {"key": "host", "value": "localhost"},
        {"key": "", "value": "== Cache Config ==="},
        {"key": "/", "value": "Redis configuration"},
        {"key": "port", "value": "6379"}
      ],
      "meta": {"tags": ["section-headers", "comments", "mixed-content"], "level": 2}
    },
    {
      "name": "multiline_section_header_value",
      "input": "== Section Header =\n  This continues the header\nkey = value",
      "expected": [
        {"key": "", "value": "= Section Header =\n  This continues the header"},
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["section-headers", "multiline", "edge-case"], "level": 2}
    },
    {
      "name": "unindented_multiline_becomes_continuation",
      "input": "== Section Header =\nThis continues the header\nkey = value",
      "expected": [
        {"key": "", "value": "= Section Header =\nThis continues the header"},
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["section-headers", "unindented-continuation", "parser-behavior"], "level": 2}
    }
  ],
  "composition_tests": [
    {
      "name": "monoid_identity_left_empty",
      "property": "monoid_identity_left",
      "input1": "",
      "input2": "key = value",
      "expected_combined": [
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["algebraic", "monoid", "identity"], "level": 2}
    },
    {
      "name": "monoid_identity_right_empty", 
      "property": "monoid_identity_right",
      "input1": "key = value",
      "input2": "",
      "expected_combined": [
        {"key": "key", "value": "value"}
      ],
      "meta": {"tags": ["algebraic", "monoid", "identity"], "level": 2}
    },
    {
      "name": "semigroup_associativity_three_configs",
      "property": "semigroup_associativity",
      "input1": "a = 1",
      "input2": "b = 2", 
      "input3": "c = 3",
      "expected_left_assoc": [
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"},
        {"key": "c", "value": "3"}
      ],
      "expected_right_assoc": [
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"},
        {"key": "c", "value": "3"}
      ],
      "meta": {"tags": ["algebraic", "semigroup", "associativity"], "level": 2}
    },
    {
      "name": "composition_closure_property",
      "property": "closure",
      "input1": "name = alice\nage = 25",
      "input2": "city = boston\nage = 26",
      "expected_combined": [
        {"key": "name", "value": "alice"},
        {"key": "age", "value": "25"},
        {"key": "city", "value": "boston"},
        {"key": "age", "value": "26"}
      ],
      "meta": {"tags": ["algebraic", "closure", "composition"], "level": 2}
    }
  ]
}