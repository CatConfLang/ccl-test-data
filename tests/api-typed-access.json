{
  "$schema": "./schema.json",
  "suite": "CCL Typed Access - Validation Format",
  "version": "2.1",
  "description": "Type-aware value extraction with validation and smart type inference using new validation-based format - get_string(), get_int(), get_bool(), get_float()",
  "llm_metadata": {
    "llm_description": "Level 2 CCL typed access - type-aware value extraction with conversion and validation (most common extension)",
    "complexity_level": "Level 2 (Typed Access)",
    "prerequisite_tests": ["api-core-ccl-parsing.json", "api-core-ccl-hierarchy.json", "api-core-ccl-integration.json"],
    "related_functions": ["get_string", "get_int", "get_bool", "get_float", "get_list"],
    "implementation_notes": "Level 2 common extension. Requires Core CCL (Level 1) foundation. Most implementations provide type-safe value extraction.",
    "test_count": 22,
    "assertion_count": 107,
    "cross_references": {
      "gleam_implementation": "packages/ccl/src/ccl.gleam#get_string",
      "go_reference": "internal/mock/ccl.go#GetString",
      "documentation": "https://ccl.tylerbutler.com/api-reference#typed-access"
    },
    "learning_path": "Requires Core CCL (Level 1) → Implement here → api-advanced-processing.json (Level 3) → api-experimental.json (Level 4)"
  },
  "tests": [
    {
      "name": "parse_basic_integer",
      "input": "port = 8080",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "port",
              "value": "8080"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "port": "8080"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "port"
              ],
              "expected": 8080
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_basic_float",
      "input": "temperature = 98.6",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "temperature",
              "value": "98.6"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "temperature": "98.6"
          }
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "temperature"
              ],
              "expected": 98.6
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_float",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_boolean_true",
      "input": "enabled = true",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "enabled",
              "value": "true"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "enabled": "true"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "enabled"
              ],
              "expected": true
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "behavior:boolean_lenient",
          "function:get_bool",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_boolean_yes",
      "input": "active = yes",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "active",
              "value": "yes"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "active": "yes"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "active"
              ],
              "expected": true
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_lenient",
          "function:get_bool",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "flexible_boolean_parsing",
        "conflicts": [
          "behavior:boolean_strict"
        ]
      }
    },
    {
      "name": "parse_boolean_yes_strict_literal",
      "input": "active = yes",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "active",
              "value": "yes"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "active": "yes"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "active"
              ],
              "error": true,
              "error_message": "Value is not a boolean"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "function:get_bool",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": [
          "behavior:boolean_lenient"
        ]
      }
    },
    {
      "name": "parse_boolean_false",
      "input": "disabled = false",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "disabled",
              "value": "false"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "disabled": "false"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "disabled"
              ],
              "expected": false
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "behavior:boolean_lenient",
          "function:get_bool",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_string_fallback",
      "input": "name = Alice",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "name",
              "value": "Alice"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "name": "Alice"
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "name"
              ],
              "expected": "Alice"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_string",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_negative_integer",
      "input": "offset = -42",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "offset",
              "value": "-42"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "offset": "-42"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "offset"
              ],
              "expected": -42
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_zero_values",
      "input": "count = 0\ndistance = 0.0\ndisabled = no",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {
              "key": "count",
              "value": "0"
            },
            {
              "key": "distance",
              "value": "0.0"
            },
            {
              "key": "disabled",
              "value": "no"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "count": "0",
            "distance": "0.0",
            "disabled": "no"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "count"
              ],
              "expected": 0
            }
          ]
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "distance"
              ],
              "expected": 0.0
            }
          ]
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "disabled"
              ],
              "expected": false
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_lenient",
          "feature:empty_keys",
          "function:get_bool",
          "function:get_float",
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "flexible_boolean_parsing",
        "conflicts": [
          "behavior:boolean_strict"
        ]
      }
    },
    {
      "name": "parse_zero_values_strict_literal",
      "input": "count = 0\ndistance = 0.0\ndisabled = no",
      "validations": {
        "parse": {
          "count": 3,
          "expected": [
            {
              "key": "count",
              "value": "0"
            },
            {
              "key": "distance",
              "value": "0.0"
            },
            {
              "key": "disabled",
              "value": "no"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "count": "0",
            "distance": "0.0",
            "disabled": "no"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "count"
              ],
              "expected": 0
            }
          ]
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "distance"
              ],
              "expected": 0.0
            }
          ]
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "disabled"
              ],
              "error": true,
              "error_message": "Value is not a boolean"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "feature:empty_keys",
          "function:get_bool",
          "function:get_float",
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": [
          "behavior:boolean_lenient"
        ]
      }
    },
    {
      "name": "parse_boolean_variants",
      "input": "flag1 = yes\nflag2 = on\nflag3 = 1\nflag4 = false\nflag5 = no\nflag6 = off\nflag7 = 0",
      "validations": {
        "parse": {
          "count": 7,
          "expected": [
            {
              "key": "flag1",
              "value": "yes"
            },
            {
              "key": "flag2",
              "value": "on"
            },
            {
              "key": "flag3",
              "value": "1"
            },
            {
              "key": "flag4",
              "value": "false"
            },
            {
              "key": "flag5",
              "value": "no"
            },
            {
              "key": "flag6",
              "value": "off"
            },
            {
              "key": "flag7",
              "value": "0"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "flag1": "yes",
            "flag2": "on",
            "flag3": "1",
            "flag4": "false",
            "flag5": "no",
            "flag6": "off",
            "flag7": "0"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "flag1"
              ],
              "expected": true
            }
          ]
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "flag3"
              ],
              "expected": 1
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_lenient",
          "function:get_bool",
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "flexible_boolean_parsing",
        "conflicts": [
          "behavior:boolean_strict"
        ]
      }
    },
    {
      "name": "parse_boolean_variants_strict_literal",
      "input": "flag1 = yes\nflag2 = on\nflag3 = 1\nflag4 = false\nflag5 = no\nflag6 = off\nflag7 = 0",
      "validations": {
        "parse": {
          "count": 7,
          "expected": [
            {
              "key": "flag1",
              "value": "yes"
            },
            {
              "key": "flag2",
              "value": "on"
            },
            {
              "key": "flag3",
              "value": "1"
            },
            {
              "key": "flag4",
              "value": "false"
            },
            {
              "key": "flag5",
              "value": "no"
            },
            {
              "key": "flag6",
              "value": "off"
            },
            {
              "key": "flag7",
              "value": "0"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "flag1": "yes",
            "flag2": "on",
            "flag3": "1",
            "flag4": "false",
            "flag5": "no",
            "flag6": "off",
            "flag7": "0"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "flag1"
              ],
              "error": true,
              "error_message": "Value is not a boolean"
            }
          ]
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "flag3"
              ],
              "expected": 1
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "function:get_bool",
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": [
          "behavior:boolean_lenient"
        ]
      }
    },
    {
      "name": "parse_mixed_types",
      "input": "host = localhost\nport = 8080\nssl = true\ntimeout = 30.5\ndebug = off",
      "validations": {
        "parse": {
          "count": 5,
          "expected": [
            {
              "key": "host",
              "value": "localhost"
            },
            {
              "key": "port",
              "value": "8080"
            },
            {
              "key": "ssl",
              "value": "true"
            },
            {
              "key": "timeout",
              "value": "30.5"
            },
            {
              "key": "debug",
              "value": "off"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "host": "localhost",
            "port": "8080",
            "ssl": "true",
            "timeout": "30.5",
            "debug": "off"
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "host"
              ],
              "expected": "localhost"
            }
          ]
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "port"
              ],
              "expected": 8080
            }
          ]
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "ssl"
              ],
              "expected": true
            }
          ]
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "timeout"
              ],
              "expected": 30.5
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_lenient",
          "function:get_bool",
          "function:get_float",
          "function:get_int",
          "function:get_string",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "flexible_boolean_parsing",
        "conflicts": [
          "behavior:boolean_strict"
        ]
      }
    },
    {
      "name": "parse_mixed_types_strict_literal",
      "input": "host = localhost\nport = 8080\nssl = true\ntimeout = 30.5\ndebug = off",
      "validations": {
        "parse": {
          "count": 5,
          "expected": [
            {
              "key": "host",
              "value": "localhost"
            },
            {
              "key": "port",
              "value": "8080"
            },
            {
              "key": "ssl",
              "value": "true"
            },
            {
              "key": "timeout",
              "value": "30.5"
            },
            {
              "key": "debug",
              "value": "off"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "host": "localhost",
            "port": "8080",
            "ssl": "true",
            "timeout": "30.5",
            "debug": "off"
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "host"
              ],
              "expected": "localhost"
            }
          ]
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "port"
              ],
              "expected": 8080
            }
          ]
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "ssl"
              ],
              "expected": true
            }
          ]
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "timeout"
              ],
              "expected": 30.5
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "function:get_bool",
          "function:get_float",
          "function:get_int",
          "function:get_string",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": [
          "behavior:boolean_lenient"
        ]
      }
    },
    {
      "name": "parse_empty_value",
      "input": "empty_key =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "empty_key",
              "value": ""
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "empty_key": ""
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "empty_key"
              ],
              "expected": ""
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_string",
          "function:build_hierarchy",
          "function:parse",
          "variant:proposed_behavior"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": ["variant:reference_compliant"]
      }
    },
    {
      "name": "empty_value_reference_behavior",
      "description": "OCaml reference treats empty values as literal string keys",
      "input": "empty_key =",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "empty_key",
              "value": ""
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "empty_key": ""
          }
        }
      },
      "meta": {
        "tags": [
          "function:parse",
          "function:build_hierarchy",
          "variant:reference_compliant"
        ],
        "level": 3,
        "feature": "object_construction",
        "conflicts": ["variant:proposed_behavior"]
      }
    },
    {
      "name": "parse_with_whitespace",
      "input": "number =   42   \nflag =  true  ",
      "validations": {
        "parse": {
          "count": 2,
          "expected": [
            {
              "key": "number",
              "value": "42"
            },
            {
              "key": "flag",
              "value": "true"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "number": "42",
            "flag": "true"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "number"
              ],
              "expected": 42
            }
          ]
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "flag"
              ],
              "expected": true
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:get_bool",
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_with_conservative_options",
      "input": "number = 42\ndecimal = 3.14\nflag = true\ntext = hello",
      "validations": {
        "parse": {
          "count": 4,
          "expected": [
            {
              "key": "number",
              "value": "42"
            },
            {
              "key": "decimal",
              "value": "3.14"
            },
            {
              "key": "flag",
              "value": "true"
            },
            {
              "key": "text",
              "value": "hello"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "number": "42",
            "decimal": "3.14",
            "flag": "true",
            "text": "hello"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "number"
              ],
              "expected": 42
            }
          ]
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "decimal"
              ],
              "expected": "3.14"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_int",
          "function:get_string",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_integer_error",
      "input": "port = not_a_number",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "port",
              "value": "not_a_number"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "port": "not_a_number"
          }
        },
        "get_int": {
          "count": 1,
          "cases": [
            {
              "args": [
                "port"
              ],
              "error": true,
              "error_message": "Cannot parse 'not_a_number' as integer at path 'port'"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_int",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_float_error",
      "input": "temperature = invalid",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "temperature",
              "value": "invalid"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "temperature": "invalid"
          }
        },
        "get_float": {
          "count": 1,
          "cases": [
            {
              "args": [
                "temperature"
              ],
              "error": true,
              "error_message": "Cannot parse 'invalid' as float at path 'temperature'"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_float",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    },
    {
      "name": "parse_boolean_error",
      "input": "enabled = maybe",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "enabled",
              "value": "maybe"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "enabled": "maybe"
          }
        },
        "get_bool": {
          "count": 1,
          "cases": [
            {
              "args": [
                "enabled"
              ],
              "error": true,
              "error_message": "Cannot parse 'maybe' as boolean at path 'enabled'"
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "behavior:boolean_strict",
          "function:get_bool",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing",
        "conflicts": [
          "behavior:boolean_lenient"
        ]
      }
    },
    {
      "name": "parse_missing_path_error",
      "input": "existing = value",
      "validations": {
        "parse": {
          "count": 1,
          "expected": [
            {
              "key": "existing",
              "value": "value"
            }
          ]
        },
        "build_hierarchy": {
          "count": 1,
          "expected": {
            "existing": "value"
          }
        },
        "get_string": {
          "count": 1,
          "cases": [
            {
              "args": [
                "missing"
              ],
              "error": true,
              "error_message": "Path 'missing' not found."
            }
          ]
        }
      },
      "meta": {
        "tags": [
          "function:get_string",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 4,
        "feature": "typed_parsing"
      }
    }
  ]
}
