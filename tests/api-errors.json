{
  "$schema": "./schema.json",
  "suite": "CCL Error Cases (Validation Format)",
  "version": "2.1",
  "description": "Error handling tests - malformed input detection across all levels using validation format",
  "llm_metadata": {
    "llm_description": "CCL error handling validation - malformed input detection and graceful failure across all implementation levels",
    "complexity_level": "Level 5",
    "prerequisite_tests": ["api-essential-parsing.json"],
    "related_functions": ["parse", "make-objects", "get-string", "get-int"],
    "implementation_notes": "Error handling tests for all levels. Validates graceful failure modes and appropriate error messages for malformed input.",
    "test_count": 6,
    "assertion_count": 6,
    "cross_references": {
      "gleam_implementation": "packages/ccl/src/ccl.gleam#error_handling",
      "go_reference": "internal/mock/ccl.go#error_cases",
      "documentation": "https://ccl.tylerbutler.com/implementing-ccl#error-handling"
    },
    "learning_path": "Implement alongside each level - essential for production readiness"
  },
  "tests": [
    {
      "name": "just_key_error",
      "input": "key",
      "validations": {
        "parse": {
          "count": 1,
          "error": true,
          "error_message": "end_of_input"
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "error-handling"
      }
    },
    {
      "name": "whitespace_only_error",
      "input": "   ",
      "validations": {
        "parse": {
          "count": 1,
          "error": true,
          "error_message": "not_enough_input"
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse",
          "variant:proposed-behavior"
        ],
        "level": 1,
        "feature": "error-handling",
        "conflicts": ["variant:reference-compliant"]
      }
    },
    {
      "name": "whitespace_only_error_ocaml_reference",
      "input": "   ",
      "validations": {
        "parse": {
          "count": 1,
          "expected": []
        }
      },
      "meta": {
        "tags": [
          "feature:whitespace",
          "function:parse",
          "variant:reference-compliant"
        ],
        "level": 1,
        "feature": "parsing",
        "conflicts": ["variant:proposed-behavior"]
      }
    },
    {
      "name": "just_string_error",
      "input": "val",
      "validations": {
        "parse": {
          "count": 1,
          "error": true,
          "error_message": "not_enough_input"
        }
      },
      "meta": {
        "tags": [
          "function:parse"
        ],
        "level": 1,
        "feature": "error-handling"
      }
    },
    {
      "name": "multiline_plain_error",
      "input": "val\n  next",
      "validations": {
        "parse": {
          "count": 1,
          "error": true,
          "error_message": "not_enough_input"
        }
      },
      "meta": {
        "tags": [
          "feature:multiline",
          "function:parse"
        ],
        "level": 1,
        "feature": "error-handling"
      }
    },
    {
      "name": "multiline_plain_nested_error",
      "input": "\nval\n  next",
      "validations": {
        "parse": {
          "count": 1,
          "error": true,
          "error_message": "end_of_input"
        }
      },
      "meta": {
        "tags": [
          "feature:multiline",
          "function:build_hierarchy",
          "function:parse"
        ],
        "level": 1,
        "feature": "error-handling"
      }
    }
  ]
}
