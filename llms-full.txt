# CCL Test Data Repository - Complete Documentation

Official JSON test suite for CCL (Configuration and Control Language) implementations with comprehensive feature-based tagging system for progressive implementation development.

## Repository Overview
- **Purpose**: Language-agnostic test suite for CCL implementations
- **Scale**: 452 test assertions across 167 tests in 10 JSON files
- **Architecture**: Feature-based tagging with progressive implementation levels
- **Target**: Cross-language CCL implementation validation and development

## Test File Detailed Breakdown

### Core Parsing Tests
**api-essential-parsing.json** (Level 1)
- Basic CCL parsing functionality
- Converts text to flat key-value pairs
- Tests fundamental syntax: keys, values, indentation
- Required functions: parse(), load()
- Foundation for all CCL implementations

**api-comprehensive-parsing.json**
- Extended parsing with edge cases
- Complex syntax variations
- Boundary condition validation
- Advanced parsing scenario coverage

### Processing and Enhancement Tests
**api-processing.json** (Level 2)  
- Entry composition and merging
- Whitespace handling and normalization
- Advanced text processing patterns
- Prerequisites: Level 1 parsing complete

**api-comments.json**
- Comment syntax handling (`/=` prefix)
- Comment filtering and preservation
- Mixed content with comments
- Feature tag: feature:comments

### Object Construction Tests
**api-object-construction.json** (Level 3)
- Converts flat entries to nested objects
- Complex object hierarchy building
- Required function: make-objects()
- Prerequisites: Level 1-2 complete

**api-dotted-keys.json**
- Dotted key expansion (foo.bar.baz → nested objects)
- Key conflict resolution
- Hierarchical structure creation
- Feature tag: feature:dotted-keys

### Type System Tests  
**api-typed-access.json** (Level 4)
- Type-aware value extraction
- Required functions: get-string(), get-int(), get-bool(), get-float()
- Array and object access patterns
- Type validation and conversion
- Prerequisites: Level 1-3 complete

### Validation and Properties
**api-errors.json**
- Error handling validation
- Invalid input scenarios
- Error message consistency
- Graceful failure patterns

**property-round-trip.json**
- Round-trip validation properties
- Parse → serialize → parse consistency
- Data integrity verification

**property-algebraic.json**  
- Algebraic properties validation
- Mathematical consistency checks
- Formal property verification

## Progressive Implementation Strategy

### Implementation Sequence
1. **Level 1 Foundation**: Start with api-essential-parsing.json
   - Implement basic parse() and load() functions
   - Handle fundamental CCL syntax
   - Establish flat key-value pair processing

2. **Level 2 Enhancement**: Add api-processing.json capabilities
   - Implement entry composition and merging
   - Add whitespace normalization
   - Include comment processing if needed

3. **Level 3 Structure**: Implement api-object-construction.json
   - Add make-objects() function
   - Convert flat entries to nested objects
   - Handle complex object hierarchies

4. **Level 4 Completion**: Add api-typed-access.json functionality
   - Implement typed accessor functions
   - Add type validation and conversion
   - Complete full CCL specification

### Feature Incremental Addition
After core levels, add optional features:
- Comments (`feature:comments` tag)
- Dotted keys (`feature:dotted-keys` tag)  
- Unicode support (`feature:unicode` tag)

## Tag Taxonomy System

### Function Tags (`function:*`)
Core CCL API functions that implementations must provide:
- `function:parse` - Basic text parsing to flat entries
- `function:load` - File loading with parsing
- `function:make-objects` - Flat entries to nested objects conversion
- `function:get-string` - String value extraction with type checking
- `function:get-int` - Integer value extraction and conversion
- `function:get-bool` - Boolean value extraction and conversion
- `function:get-float` - Floating-point value extraction and conversion

### Feature Tags (`feature:*`)  
Optional CCL language features:
- `feature:comments` - Comment syntax support (`/=` prefix)
- `feature:dotted-keys` - Dotted key expansion (foo.bar.baz)
- `feature:unicode` - Unicode content handling and validation
- `feature:lists` - List/array syntax support
- `feature:multiline` - Multi-line value support

### Behavior Tags (`behavior:*`)
Implementation behavior specifications:
- `behavior:merge` - Entry merging behavior
- `behavior:override` - Key override semantics
- `behavior:whitespace` - Whitespace handling rules
- `behavior:case-sensitive` - Case sensitivity requirements

### Variant Tags (`variant:*`)
Test variations and edge cases:
- `variant:empty` - Empty input handling
- `variant:edge-case` - Boundary conditions
- `variant:performance` - Performance-related tests
- `variant:error` - Error condition testing

## Test File Structure and Metadata

Each JSON test file follows this structure:
```json
{
  "metadata": {
    "llm_description": "Human-readable test purpose for AI tools",
    "complexity_level": "Level 1-4 implementation tier",
    "prerequisite_tests": ["list of required test files"],
    "related_functions": ["API functions tested"],
    "implementation_notes": "Guidance for implementers",
    "test_count": "Number of test cases",
    "assertion_count": "Total assertions for validation"
  },
  "tags": ["structured feature tags"],
  "tests": [
    {
      "name": "test case name",
      "input": "CCL input text",
      "expected": "expected output",
      "count": "assertions in this test"
    }
  ]
}
```

## Cross-Language Implementation Notes

### Go Implementation Reference
The repository includes a Go reference implementation demonstrating:
- 4-level progressive architecture
- Feature-based test filtering
- Comprehensive CLI with `just` commands
- 91% test pass rate with robust error handling

### Implementation Guidelines
- Start with Level 1 (parse function only)
- Add levels incrementally, validating each stage
- Use feature tags to filter relevant tests
- Implement error handling for graceful failures
- Follow language-specific idioms while maintaining CCL semantics

### Validation Commands
```bash
just deps      # Install dependencies
just reset     # Generate basic test state
just test      # Run comprehensive test suite
just stats     # Show test statistics and coverage
just validate  # Validate JSON schema compliance
```

## Integration with CCL Ecosystem

### Related Repositories
- **ccl_gleam**: Gleam language implementation with BEAM VM target
- **ccl-docs**: Official documentation site (Astro Starlight)
- **ccl-go**: Go reference implementation with test runner

### Documentation Site Integration  
- API reference with progressive complexity examples
- Implementation guides linked to test files
- Cross-language implementation patterns
- Community implementation showcase

### Test-Driven Development Workflow
1. Select implementation level (1-4)
2. Filter tests by function and feature tags
3. Implement required functions incrementally
4. Validate with JSON test assertions
5. Progress to next level when current level passes

This comprehensive test suite enables systematic, validated CCL implementation development across programming languages while maintaining consistency and compatibility with the CCL specification.