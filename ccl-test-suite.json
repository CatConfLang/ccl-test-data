{
  "test_suite": "CCL Parser Conformance Tests",
  "version": "1.0.0",
  "description": "Language-agnostic test cases for CCL (Categorical Configuration Language) parsers",
  "tests": [
    {
      "name": "basic_pairs",
      "description": "Simple key-value pairs",
      "input": "name = Alice\nage = 42",
      "expected": [
        {"key": "name", "value": "Alice"},
        {"key": "age", "value": "42"}
      ],
      "tags": ["basic"]
    },
    {
      "name": "equals_in_values",
      "description": "Values can contain equals signs",
      "input": "msg = k=v pairs live happily here\nmore = a=b=c=d",
      "expected": [
        {"key": "msg", "value": "k=v pairs live happily here"},
        {"key": "more", "value": "a=b=c=d"}
      ],
      "tags": ["basic", "equals"]
    },
    {
      "name": "trimming_rules",
      "description": "Key whitespace trimmed, value leading spaces trimmed",
      "input": "  spaces around key   =    value with leading spaces removed and trailing tabs kept? \t\t",
      "expected": [
        {"key": "spaces around key", "value": "value with leading spaces removed and trailing tabs kept?"}
      ],
      "tags": ["whitespace", "trimming"]
    },
    {
      "name": "multiline_values",
      "description": "Multiline values with continuation lines",
      "input": "description = First\n  Second line\n  Third line\ndone = yes",
      "expected": [
        {"key": "description", "value": "First\n  Second line\n  Third line"},
        {"key": "done", "value": "yes"}
      ],
      "tags": ["multiline", "continuation"]
    },
    {
      "name": "blank_lines_in_values",
      "description": "Blank lines preserved in multiline values",
      "input": "body = Line one\n\n  Line three after a blank line",
      "expected": [
        {"key": "body", "value": "Line one\n\n  Line three after a blank line"}
      ],
      "tags": ["multiline", "blank-lines"]
    },
    {
      "name": "comment_extension",
      "description": "Comments using special key",
      "input": "/= This is an environment section\nport = 8080\nserve = index.html\n/= Database section\nmode = in-memory\nconnections = 16",
      "expected": [
        {"key": "/", "value": "This is an environment section"},
        {"key": "port", "value": "8080"},
        {"key": "serve", "value": "index.html"},
        {"key": "/", "value": "Database section"},
        {"key": "mode", "value": "in-memory"},
        {"key": "connections", "value": "16"}
      ],
      "tags": ["comments", "extension"]
    },
    {
      "name": "composition_stability_ab",
      "description": "Composition preserves order (a+b)",
      "input": "a = 1\nb = 2\nb = 20\nc = 3",
      "expected": [
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"},
        {"key": "b", "value": "20"},
        {"key": "c", "value": "3"}
      ],
      "tags": ["composition", "duplicate-keys"]
    },
    {
      "name": "composition_stability_ba",
      "description": "Composition preserves order (b+a)",
      "input": "b = 20\nc = 3\na = 1\nb = 2",
      "expected": [
        {"key": "b", "value": "20"},
        {"key": "c", "value": "3"},
        {"key": "a", "value": "1"},
        {"key": "b", "value": "2"}
      ],
      "tags": ["composition", "duplicate-keys"]
    },
    {
      "name": "key_with_tabs",
      "description": "Keys with tabs are trimmed",
      "input": "\tkey\t=\tvalue",
      "expected": [
        {"key": "key", "value": "\tvalue"}
      ],
      "tags": ["whitespace", "tabs"]
    },
    {
      "name": "whitespace_only_value",
      "description": "Value that is only whitespace becomes empty",
      "input": "onlyspaces =     ",
      "expected": [
        {"key": "onlyspaces", "value": ""}
      ],
      "tags": ["whitespace", "empty-value"]
    },
    {
      "name": "unicode_graphemes",
      "description": "Unicode characters in values",
      "input": "emoji = üòÄüòÉüòÑ",
      "expected": [
        {"key": "emoji", "value": "üòÄüòÉüòÑ"}
      ],
      "tags": ["unicode", "basic"]
    },
    {
      "name": "crlf_normalization",
      "description": "CRLF line endings normalized to LF",
      "input": "key1 = value1\r\nkey2 = value2\r\n",
      "expected": [
        {"key": "key1", "value": "value1"},
        {"key": "key2", "value": "value2"}
      ],
      "tags": ["line-endings", "normalization"]
    },
    {
      "name": "empty_input",
      "description": "Empty input returns empty result",
      "input": "",
      "expected": [],
      "tags": ["edge-cases", "empty"]
    },
    {
      "name": "no_equals_continuation",
      "description": "Lines without equals are continuations",
      "input": "key = first line\nsecond line without equals\nthird line",
      "expected": [
        {"key": "key", "value": "first line\nsecond line without equals\nthird line"}
      ],
      "tags": ["continuation", "multiline"]
    },
    {
      "name": "key_only_empty_value",
      "description": "Key followed by equals and no value",
      "input": "emptykey =\nother = value",
      "expected": [
        {"key": "emptykey", "value": ""},
        {"key": "other", "value": "value"}
      ],
      "tags": ["empty-value", "basic"]
    },
    {
      "name": "tab_preservation_in_values",
      "description": "Tabs preserved in values, spaces trimmed",
      "input": "mixed =    \tvalue with leading spaces and tabs\t",
      "expected": [
        {"key": "mixed", "value": "\tvalue with leading spaces and tabs"}
      ],
      "tags": ["whitespace", "tabs", "trimming"]
    },
    {
      "name": "unicode_keys",
      "description": "Unicode characters in keys",
      "input": "ÈÖçÁΩÆ = config in Chinese\n–∫–ª—é—á = key in Russian",
      "expected": [
        {"key": "ÈÖçÁΩÆ", "value": "config in Chinese"},
        {"key": "–∫–ª—é—á", "value": "key in Russian"}
      ],
      "tags": ["unicode", "keys"]
    },
    {
      "name": "mixed_indentation_continuation",
      "description": "Mixed spaces and tabs in continuation lines",
      "input": "description = First line\n    spaces indented\n\ttab indented\n  \tmixed indent",
      "expected": [
        {"key": "description", "value": "First line\n    spaces indented\n\ttab indented\n  \tmixed indent"}
      ],
      "tags": ["multiline", "indentation", "mixed-whitespace"]
    },
    {
      "name": "eof_without_newline",
      "description": "File ending without trailing newline",
      "input": "last = final value",
      "expected": [
        {"key": "last", "value": "final value"}
      ],
      "tags": ["edge-cases", "eof"]
    },
    {
      "name": "spaces_vs_tabs_continuation",
      "description": "Leading whitespace preserved in continuation lines",
      "input": "text = First\n    four spaces\n\ttab preserved",
      "expected": [
        {"key": "text", "value": "First\n    four spaces\n\ttab preserved"}
      ],
      "tags": ["continuation", "whitespace", "tabs"]
    },
    {
      "name": "basic_single_no_spaces",
      "description": "Basic single key-value without spaces",
      "input": "key=val",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["basic"]
    },
    {
      "name": "basic_with_spaces",
      "description": "Basic key-value with spaces around equals",
      "input": "key = val",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["basic", "whitespace"]
    },
    {
      "name": "indented_key",
      "description": "Key-value pair with indented key",
      "input": "  key = val",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["whitespace", "indentation"]
    },
    {
      "name": "value_trailing_spaces",
      "description": "Key-value with trailing spaces in value",
      "input": "key = val  ",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["whitespace", "trimming"]
    },
    {
      "name": "key_value_surrounded_spaces",
      "description": "Key-value with spaces around key and value",
      "input": "  key  =  val  ",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["whitespace", "trimming"]
    },
    {
      "name": "surrounded_by_newlines",
      "description": "Key-value surrounded by newlines",
      "input": "\nkey = val\n",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["line-endings"]
    },
    {
      "name": "key_empty_value",
      "description": "Key with empty value",
      "input": "key =",
      "expected": [
        {"key": "key", "value": ""}
      ],
      "tags": ["empty-value"]
    },
    {
      "name": "empty_value_with_newline",
      "description": "Key with empty value followed by newline",
      "input": "key =\n",
      "expected": [
        {"key": "key", "value": ""}
      ],
      "tags": ["empty-value", "line-endings"]
    },
    {
      "name": "empty_value_with_spaces",
      "description": "Key with empty value and trailing spaces",
      "input": "key =  ",
      "expected": [
        {"key": "key", "value": ""}
      ],
      "tags": ["empty-value", "whitespace"]
    },
    {
      "name": "empty_key_with_value",
      "description": "Empty key with value",
      "input": "= val",
      "expected": [
        {"key": "", "value": "val"}
      ],
      "tags": ["empty-key", "lists"]
    },
    {
      "name": "empty_key_indented",
      "description": "Empty key with leading indentation",
      "input": "  = val",
      "expected": [
        {"key": "", "value": "val"}
      ],
      "tags": ["empty-key", "lists", "indentation"]
    },
    {
      "name": "empty_key_with_newline",
      "description": "Empty key with leading newline and indentation",
      "input": "\n  = val",
      "expected": [
        {"key": "", "value": "val"}
      ],
      "tags": ["empty-key", "lists", "line-endings"]
    },
    {
      "name": "empty_key_and_value",
      "description": "Both key and value are empty",
      "input": "=",
      "expected": [
        {"key": "", "value": ""}
      ],
      "tags": ["empty-key", "empty-value"]
    },
    {
      "name": "empty_key_value_with_spaces",
      "description": "Empty key and value with surrounding spaces",
      "input": "  =  ",
      "expected": [
        {"key": "", "value": ""}
      ],
      "tags": ["empty-key", "empty-value", "whitespace"]
    },
    {
      "name": "equals_in_value_no_spaces",
      "description": "Equals sign in value without spaces",
      "input": "a=b=c",
      "expected": [
        {"key": "a", "value": "b=c"}
      ],
      "tags": ["equals", "basic"]
    },
    {
      "name": "equals_in_value_with_spaces",
      "description": "Equals sign in value with surrounding spaces",
      "input": "a = b = c",
      "expected": [
        {"key": "a", "value": "b = c"}
      ],
      "tags": ["equals", "whitespace"]
    },
    {
      "name": "multiple_key_value_pairs",
      "description": "Multiple key-value pairs on separate lines",
      "input": "key1 = val1\nkey2 = val2",
      "expected": [
        {"key": "key1", "value": "val1"},
        {"key": "key2", "value": "val2"}
      ],
      "tags": ["basic", "multiple"]
    },
    {
      "name": "list_with_empty_keys",
      "description": "List representation using empty keys",
      "input": "= 3\n= 1\n= 2",
      "expected": [
        {"key": "", "value": "3"},
        {"key": "", "value": "1"},
        {"key": "", "value": "2"}
      ],
      "tags": ["lists", "empty-key"]
    },
    {
      "name": "array_style_list",
      "description": "Array-style list using numeric keys with empty values",
      "input": "1 =\n2 =\n3 =",
      "expected": [
        {"key": "1", "value": ""},
        {"key": "2", "value": ""},
        {"key": "3", "value": ""}
      ],
      "tags": ["lists", "empty-value"]
    },
    {
      "name": "indented_equals_continuation",
      "description": "Indented lines with equals signs become continuation values",
      "input": "key1 = val1\n  inner = some\nkey2 = val2",
      "expected": [
        {"key": "key1", "value": "val1\n  inner = some"},
        {"key": "key2", "value": "val2"}
      ],
      "tags": ["continuation", "indentation", "equals"]
    },
    {
      "name": "nested_single_line",
      "description": "Single line nested value",
      "input": "key =\n  val",
      "expected": [
        {"key": "key", "value": "\n  val"}
      ],
      "tags": ["nested", "indentation"]
    },
    {
      "name": "nested_multi_line",
      "description": "Multi-line nested value",
      "input": "key =\n  line1\n  line2",
      "expected": [
        {"key": "key", "value": "\n  line1\n  line2"}
      ],
      "tags": ["nested", "indentation", "multiline"]
    },
    {
      "name": "nested_with_blank_line",
      "description": "Multi-line nested value with blank line",
      "input": "key =\n  line1\n\n  line2",
      "expected": [
        {"key": "key", "value": "\n  line1\n\n  line2"}
      ],
      "tags": ["nested", "indentation", "multiline", "blank-lines"]
    },
    {
      "name": "nested_key_value_pairs",
      "description": "Nested key-value pairs treated as continuation value",
      "input": "key =\n  field1 = value1\n  field2 = value2",
      "expected": [
        {"key": "key", "value": "\n  field1 = value1\n  field2 = value2"}
      ],
      "tags": ["nested", "indentation", "equals", "continuation"]
    },
    {
      "name": "deep_nested_structure",
      "description": "Deep nested key-value pairs with multiple indentation levels",
      "input": "key =\n  field1 = value1\n  field2 =\n    subfield = x\n    another = y",
      "expected": [
        {"key": "key", "value": "\n  field1 = value1\n  field2 =\n    subfield = x\n    another = y"}
      ],
      "tags": ["nested", "indentation", "deep", "continuation"]
    },
    {
      "name": "section_style_syntax",
      "description": "Section-style syntax creates empty key entry",
      "input": "== Section 2 ==",
      "expected": [
        {"key": "", "value": "= Section 2 =="}
      ],
      "tags": ["section", "empty-key", "special-syntax"]
    },
    {
      "name": "multiple_empty_equality",
      "description": "Multiple equals with empty key",
      "input": " =  = ",
      "expected": [
        {"key": "", "value": "="}
      ],
      "tags": ["empty-key", "multiple-equals", "whitespace"]
    },
    {
      "name": "key_with_newline_before_equals",
      "description": "Key with newline before equals sign",
      "input": "key \n= val\n",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["whitespace", "newlines", "edge-case"]
    },
    {
      "name": "complex_multi_newline_whitespace",
      "description": "Complex whitespace with multiple newlines",
      "input": "  \n key  \n=  val  \n",
      "expected": [
        {"key": "key", "value": "val"}
      ],
      "tags": ["whitespace", "newlines", "edge-case"]
    },
    {
      "name": "empty_value_with_trailing_spaces_newline",
      "description": "Empty value with trailing spaces and newline",
      "input": "key =  \n",
      "expected": [
        {"key": "key", "value": ""}
      ],
      "tags": ["empty-value", "whitespace", "newlines"]
    },
    {
      "name": "empty_key_value_with_surrounding_newlines",
      "description": "Empty key and value with surrounding newlines",
      "input": "\n  =  \n",
      "expected": [
        {"key": "", "value": ""}
      ],
      "tags": ["empty-key", "empty-value", "newlines", "whitespace"]
    },
    {
      "name": "comment_syntax_slash_equals",
      "description": "Comment syntax using slash equals",
      "input": "/= this is a comment",
      "expected": [
        {"key": "/", "value": "this is a comment"}
      ],
      "tags": ["comment", "special-syntax"]
    },
    {
      "name": "realistic_stress_test",
      "description": "Real-world configuration example",
      "input": "name = Dmitrii Kovanikov\nlogin = chshersh\nlanguage = OCaml\ndate = 2024-05-25",
      "expected": [
        {"key": "name", "value": "Dmitrii Kovanikov"},
        {"key": "login", "value": "chshersh"},
        {"key": "language", "value": "OCaml"},
        {"key": "date", "value": "2024-05-25"}
      ],
      "tags": ["realistic", "multiple-pairs", "stress-test"]
    }
  ],
  "error_tests": [
    {
      "name": "just_key_error",
      "description": "Key without equals should cause error",
      "input": "key",
      "expected_error": true,
      "error_message": "end_of_input",
      "tags": ["error", "incomplete"]
    },
    {
      "name": "whitespace_only_error",
      "description": "Input with only whitespace should cause error",
      "input": "   ",
      "expected_error": true,
      "error_message": "not_enough_input", 
      "tags": ["error", "whitespace", "empty"]
    },
    {
      "name": "just_string_error",
      "description": "Plain string without equals should cause error",
      "input": "val",
      "expected_error": true,
      "error_message": "not_enough_input",
      "tags": ["error", "incomplete"]
    },
    {
      "name": "multiline_plain_error",
      "description": "Multiline plain text without equals should cause error",
      "input": "val\n  next",
      "expected_error": true,
      "error_message": "not_enough_input",
      "tags": ["error", "multiline", "incomplete"]
    },
    {
      "name": "multiline_plain_nested_error",
      "description": "Nested multiline plain text should cause error",
      "input": "\nval\n  next",
      "expected_error": true,
      "error_message": "end_of_input",
      "tags": ["error", "multiline", "nested", "incomplete"]
    }
  ]
}