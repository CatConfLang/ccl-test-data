{
  "$schema": "../../schemas/source-format.json",
  "tests": [
    {
      "name": "spacing_strict_standard_format",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "strict_spacing",
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = value"
      ]
    },
    {
      "name": "spacing_loose_no_spaces",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key=value"
      ]
    },
    {
      "name": "spacing_loose_left_space_only",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key =value"
      ]
    },
    {
      "name": "spacing_loose_right_space_only",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key= value"
      ]
    },
    {
      "name": "spacing_loose_multiple_spaces",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key  =  value"
      ]
    },
    {
      "name": "spacing_loose_tabs_around_equals",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key\t=\tvalue"
      ]
    },
    {
      "name": "spacing_loose_mixed_whitespace",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "value"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key \t = \t value"
      ]
    },
    {
      "name": "spacing_loose_multiline_various",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key1",
              "value": "val1"
            },
            {
              "key": "key2",
              "value": "val2"
            },
            {
              "key": "key3",
              "value": "val3"
            },
            {
              "key": "key4",
              "value": "val4"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "key1": "val1",
            "key2": "val2",
            "key3": "val3",
            "key4": "val4"
          }
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key1=val1\nkey2 = val2\nkey3  =  val3\nkey4\t=\tval4"
      ]
    },
    {
      "name": "spacing_canonical_format_normalizes_loose",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key1",
              "value": "val1"
            },
            {
              "key": "key2",
              "value": "val2"
            }
          ]
        },
        {
          "function": "canonical_format",
          "expect": "key1 = val1\nkey2 = val2"
        }
      ],
      "behaviors": [
        "loose_spacing"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key1=val1\nkey2  =  val2"
      ]
    },
    {
      "name": "tabs_preserve_in_value",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "\tvalue\twith\ttabs"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "key": "\tvalue\twith\ttabs"
          }
        },
        {
          "function": "get_string",
          "args": [
            "key"
          ],
          "expect": "\tvalue\twith\ttabs"
        }
      ],
      "behaviors": [
        "tabs_preserve"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue\twith\ttabs"
      ]
    },
    {
      "name": "tabs_preserve_leading_tab",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "\tindented"
            }
          ]
        },
        {
          "function": "get_string",
          "args": [
            "key"
          ],
          "expect": "\tindented"
        }
      ],
      "behaviors": [
        "tabs_preserve"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tindented"
      ]
    },
    {
      "name": "tabs_to_spaces_in_value",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": " value with tabs"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "key": " value with tabs"
          }
        },
        {
          "function": "get_string",
          "args": [
            "key"
          ],
          "expect": " value with tabs"
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue\twith\ttabs"
      ]
    },
    {
      "name": "tabs_to_spaces_leading_tab",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": " indented"
            }
          ]
        },
        {
          "function": "get_string",
          "args": [
            "key"
          ],
          "expect": " indented"
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tindented"
      ]
    },
    {
      "name": "tabs_to_spaces_multiple_tabs",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "   three_tabs"
            }
          ]
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \t\t\tthree_tabs"
      ]
    },
    {
      "name": "tabs_preserve_multiline",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "section",
              "value": "\n \tindented_with_tabs\n \tanother_line"
            }
          ]
        }
      ],
      "behaviors": [
        "tabs_preserve"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "section =\n \tindented_with_tabs\n \tanother_line"
      ]
    },
    {
      "name": "tabs_to_spaces_multiline",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "section",
              "value": "\n  indented_with_tabs\n  another_line"
            }
          ]
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "section =\n\t\tindented_with_tabs\n\t\tanother_line"
      ]
    },
    {
      "name": "tabs_to_spaces_mixed_indent",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "section",
              "value": "\n  mixed_indent\n  another_line"
            }
          ]
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "section =\n \tmixed_indent\n\t another_line"
      ]
    },
    {
      "name": "tabs_canonical_format_preserve",
      "tests": [
        {
          "function": "canonical_format",
          "expect": "key = \tvalue"
        }
      ],
      "behaviors": [
        "tabs_preserve"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue"
      ]
    },
    {
      "name": "tabs_canonical_format_to_spaces",
      "tests": [
        {
          "function": "canonical_format",
          "expect": "key =  value"
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue"
      ]
    },
    {
      "name": "tabs_to_spaces_multiline_print",
      "tests": [
        {
          "function": "canonical_format",
          "expect": "section =\n  indented\n  another"
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "section =\n\t\tindented\n\t\tanother"
      ]
    },
    {
      "name": "tabs_to_spaces_round_trip",
      "tests": [
        {
          "function": "round_trip",
          "expect": "key =  value with tabs"
        }
      ],
      "behaviors": [
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue\twith\ttabs"
      ]
    },
    {
      "name": "spacing_and_tabs_combined_loose_preserve",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": "\tvalue\twith\ttabs"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing",
        "tabs_preserve"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key\t=\t\tvalue\twith\ttabs"
      ]
    },
    {
      "name": "spacing_and_tabs_combined_loose_to_spaces",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": " value with tabs"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing",
        "tabs_to_spaces"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key\t=\t\tvalue\twith\ttabs"
      ]
    },
    {
      "name": "nested_bare_list_indentation",
      "tests": [
        {
          "function": "canonical_format",
          "expect": "package =\n  = brew\n  = scoop\n  = nix"
        }
      ],
      "features": [
        "empty_keys",
        "whitespace"
      ],
      "inputs": [
        "package =\n  = brew\n  = scoop\n  = nix"
      ]
    },
    {
      "name": "deeply_nested_bare_list_indentation",
      "tests": [
        {
          "function": "canonical_format",
          "expect": "app =\n  = item1\n  = item2\n  config =\n    = nested1\n    = nested2\n    deep =\n      = level3a\n      = level3b"
        }
      ],
      "features": [
        "empty_keys",
        "whitespace"
      ],
      "inputs": [
        "app =\n  = item1\n  config =\n    = nested1\n    = nested2\n    deep =\n      = level3a\n      = level3b\n  = item2"
      ]
    },
    {
      "name": "crlf_normalize_to_lf_basic",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key1",
              "value": "value1"
            },
            {
              "key": "key2",
              "value": "value2"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "key1": "value1",
            "key2": "value2"
          }
        }
      ],
      "behaviors": [
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key1 = value1\r\nkey2 = value2\r\n"
      ]
    },
    {
      "name": "crlf_preserve_literal_basic",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key1",
              "value": "value1\r"
            },
            {
              "key": "key2",
              "value": "value2\r"
            }
          ]
        }
      ],
      "behaviors": [
        "crlf_preserve_literal"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key1 = value1\r\nkey2 = value2\r\n"
      ]
    },
    {
      "name": "crlf_normalize_multiline_value",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "multiline",
              "value": "\n  line1\n  line2"
            }
          ]
        }
      ],
      "behaviors": [
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "multiline =\r\n  line1\r\n  line2"
      ]
    },
    {
      "name": "crlf_preserve_multiline_value",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "multiline",
              "value": "\r\n  line1\r\n  line2"
            }
          ]
        }
      ],
      "behaviors": [
        "crlf_preserve_literal"
      ],
      "features": [
        "whitespace",
        "multiline"
      ],
      "inputs": [
        "multiline =\r\n  line1\r\n  line2"
      ]
    },
    {
      "name": "crlf_mixed_line_endings",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "lf_line",
              "value": "value1"
            },
            {
              "key": "crlf_line",
              "value": "value2"
            },
            {
              "key": "lf_again",
              "value": "value3"
            }
          ]
        }
      ],
      "behaviors": [
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "lf_line = value1\ncrlf_line = value2\r\nlf_again = value3\n"
      ]
    },
    {
      "name": "crlf_nested_structure",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "config",
              "value": "\n  host = localhost\n  port = 8080"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "config": {
              "host": "localhost",
              "port": "8080"
            }
          }
        }
      ],
      "behaviors": [
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "config =\r\n  host = localhost\r\n  port = 8080"
      ]
    },
    {
      "name": "behavior_combo_tabs_and_crlf",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key",
              "value": " value with tabs"
            }
          ]
        }
      ],
      "behaviors": [
        "tabs_to_spaces",
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key = \tvalue\twith\ttabs\r\n"
      ]
    },
    {
      "name": "behavior_combo_loose_tabs_crlf",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "key1",
              "value": "\tvalue1"
            },
            {
              "key": "key2",
              "value": "\tvalue2"
            }
          ]
        }
      ],
      "behaviors": [
        "loose_spacing",
        "tabs_preserve",
        "crlf_normalize_to_lf"
      ],
      "features": [
        "whitespace"
      ],
      "inputs": [
        "key1=\tvalue1\r\nkey2\t=\tvalue2\r\n"
      ]
    }
  ]
}
