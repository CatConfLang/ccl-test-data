{
  "$schema": "../../schemas/source-format.json",
  "tests": [
    {
      "name": "complete_basic_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "name",
              "value": "Alice"
            },
            {
              "key": "age",
              "value": "42"
            }
          ]
        },
        {
          "function": "print",
          "expect": "name = Alice\nage = 42"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "age": "42",
            "name": "Alice"
          }
        }
      ],
      "inputs": [
        "name = Alice\nage = 42"
      ]
    },
    {
      "name": "complete_nested_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "database",
              "value": "\n  host = localhost\n  port = 5432\n  enabled = true"
            }
          ]
        },
        {
          "function": "print",
          "expect": "database = \n  host = localhost\n  port = 5432\n  enabled = true"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "database": {
              "enabled": "true",
              "host": "localhost",
              "port": "5432"
            }
          }
        }
      ],
      "inputs": [
        "database =\n  host = localhost\n  port = 5432\n  enabled = true"
      ]
    },
    {
      "name": "complete_mixed_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "app",
              "value": "MyApp"
            },
            {
              "key": "version",
              "value": "1.0.0"
            },
            {
              "key": "config",
              "value": "\n  debug = true\n  features =\n    feature1 = enabled\n    feature2 = disabled"
            }
          ]
        },
        {
          "function": "print",
          "expect": "app = MyApp\nversion = 1.0.0\nconfig = \n  debug = true\n  features =\n    feature1 = enabled\n    feature2 = disabled"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "app": "MyApp",
            "config": {
              "debug": "true",
              "features": {
                "feature1": "enabled",
                "feature2": "disabled"
              }
            },
            "version": "1.0.0"
          }
        }
      ],
      "inputs": [
        "app = MyApp\nversion = 1.0.0\nconfig =\n  debug = true\n  features =\n    feature1 = enabled\n    feature2 = disabled"
      ]
    },
    {
      "name": "complete_lists_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "servers",
              "value": "\n  server = web1\n  server = web2\n  server = web3"
            },
            {
              "key": "ports",
              "value": "\n  port = 80\n  port = 443"
            }
          ]
        },
        {
          "function": "print",
          "expect": "servers = \n  server = web1\n  server = web2\n  server = web3\nports = \n  port = 80\n  port = 443"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "ports": {
              "port": [
                "80",
                "443"
              ]
            },
            "servers": {
              "server": [
                "web1",
                "web2",
                "web3"
              ]
            }
          }
        }
      ],
      "behaviors": [
        "array_order_insertion"
      ],
      "inputs": [
        "servers =\n  server = web1\n  server = web2\n  server = web3\nports =\n  port = 80\n  port = 443"
      ]
    },
    {
      "name": "complete_lists_workflow_lexicographic",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "servers",
              "value": "\n  server = web1\n  server = web2\n  server = web3"
            },
            {
              "key": "ports",
              "value": "\n  port = 80\n  port = 443"
            }
          ]
        },
        {
          "function": "print",
          "expect": "servers = \n  server = web1\n  server = web2\n  server = web3\nports = \n  port = 80\n  port = 443"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "ports": {
              "port": [
                "443",
                "80"
              ]
            },
            "servers": {
              "server": [
                "web1",
                "web2",
                "web3"
              ]
            }
          }
        }
      ],
      "behaviors": [
        "array_order_lexicographic"
      ],
      "inputs": [
        "servers =\n  server = web1\n  server = web2\n  server = web3\nports =\n  port = 80\n  port = 443"
      ]
    },
    {
      "name": "complete_multiline_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "description",
              "value": "Welcome to our app\n  This is a multi-line description\n  With several lines"
            },
            {
              "key": "config",
              "value": "\n  settings =\n    value1 = one\n    value2 = two"
            }
          ]
        },
        {
          "function": "print",
          "expect": "description = Welcome to our app\n  This is a multi-line description\n  With several lines\nconfig = \n  settings =\n    value1 = one\n    value2 = two"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "config": {
              "settings": {
                "value1": "one",
                "value2": "two"
              }
            },
            "description": "Welcome to our app\n  This is a multi-line description\n  With several lines"
          }
        }
      ],
      "features": [
        "multiline"
      ],
      "inputs": [
        "description = Welcome to our app\n  This is a multi-line description\n  With several lines\nconfig =\n  settings =\n    value1 = one\n    value2 = two"
      ]
    },
    {
      "name": "real_world_complete_workflow",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "service",
              "value": "MyMicroservice"
            },
            {
              "key": "version",
              "value": "2.1.0"
            },
            {
              "key": "database",
              "value": "\n  host = db.example.com\n  port = 5432\n  credentials =\n    user = service_user\n    password = secret123\n  pools =\n    read = 5\n    write = 2"
            },
            {
              "key": "logging",
              "value": "\n  level = info\n  outputs =\n    output = console\n    output = file\n    output = syslog"
            },
            {
              "key": "features",
              "value": "\n  feature_a = enabled\n  feature_b = disabled\n  feature_c = experimental"
            }
          ]
        },
        {
          "function": "print",
          "expect": "service = MyMicroservice\nversion = 2.1.0\ndatabase = \n  host = db.example.com\n  port = 5432\n  credentials =\n    user = service_user\n    password = secret123\n  pools =\n    read = 5\n    write = 2\nlogging = \n  level = info\n  outputs =\n    output = console\n    output = file\n    output = syslog\nfeatures = \n  feature_a = enabled\n  feature_b = disabled\n  feature_c = experimental"
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "database": {
              "credentials": {
                "password": "secret123",
                "user": "service_user"
              },
              "host": "db.example.com",
              "pools": {
                "read": "5",
                "write": "2"
              },
              "port": "5432"
            },
            "features": {
              "feature_a": "enabled",
              "feature_b": "disabled",
              "feature_c": "experimental"
            },
            "logging": {
              "level": "info",
              "outputs": {
                "output": [
                  "console",
                  "file",
                  "syslog"
                ]
              }
            },
            "service": "MyMicroservice",
            "version": "2.1.0"
          }
        }
      ],
      "inputs": [
        "service = MyMicroservice\nversion = 2.1.0\ndatabase =\n  host = db.example.com\n  port = 5432\n  credentials =\n    user = service_user\n    password = secret123\n  pools =\n    read = 5\n    write = 2\nlogging =\n  level = info\n  outputs =\n    output = console\n    output = file\n    output = syslog\nfeatures =\n  feature_a = enabled\n  feature_b = disabled\n  feature_c = experimental"
      ]
    }
  ]
}
