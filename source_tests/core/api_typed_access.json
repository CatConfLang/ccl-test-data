{
  "$schema": "../../schemas/source-format.json",
  "tests": [
    {
      "name": "parse_basic_integer",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "port",
              "value": "8080"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "port": "8080"
          }
        },
        {
          "function": "get_int",
          "expect": 8080,
          "args": [
            "port"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "port = 8080"
      ]
    },
    {
      "name": "parse_basic_float",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "temperature",
              "value": "98.6"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "temperature": "98.6"
          }
        },
        {
          "function": "get_float",
          "expect": 98.6,
          "args": [
            "temperature"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "temperature = 98.6"
      ]
    },
    {
      "name": "parse_boolean_true",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "enabled",
              "value": "true"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "enabled": "true"
          }
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "enabled"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict",
        "boolean_lenient"
      ],
      "inputs": [
        "enabled = true"
      ]
    },
    {
      "name": "parse_boolean_yes",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "active",
              "value": "yes"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "active": "yes"
          }
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "active"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_lenient"
      ],
      "inputs": [
        "active = yes"
      ]
    },
    {
      "name": "parse_boolean_yes_strict_literal",
      "tests": [
        {
          "function": "build_hierarchy",
          "expect": {
            "active": "yes"
          }
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "active"
          ]
        },
        {
          "function": "parse",
          "expect": [
            {
              "key": "active",
              "value": "yes"
            }
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "active = yes"
      ]
    },
    {
      "name": "parse_boolean_false",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "disabled",
              "value": "false"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "disabled": "false"
          }
        },
        {
          "function": "get_bool",
          "expect": false,
          "args": [
            "disabled"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict",
        "boolean_lenient"
      ],
      "inputs": [
        "disabled = false"
      ]
    },
    {
      "name": "parse_string_fallback",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "name",
              "value": "Alice"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "name": "Alice"
          }
        },
        {
          "function": "get_string",
          "expect": "Alice",
          "args": [
            "name"
          ]
        }
      ],
      "inputs": [
        "name = Alice"
      ]
    },
    {
      "name": "parse_negative_integer",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "offset",
              "value": "-42"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "offset": "-42"
          }
        },
        {
          "function": "get_int",
          "expect": -42,
          "args": [
            "offset"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "offset = -42"
      ]
    },
    {
      "name": "parse_zero_values",
      "tests": [
        {
          "function": "build_hierarchy",
          "expect": {
            "count": "0",
            "disabled": "no",
            "distance": "0.0"
          }
        },
        {
          "function": "get_int",
          "expect": 0,
          "args": [
            "count"
          ]
        },
        {
          "function": "get_float",
          "expect": 0,
          "args": [
            "distance"
          ]
        },
        {
          "function": "get_bool",
          "expect": false,
          "args": [
            "disabled"
          ]
        },
        {
          "function": "parse",
          "expect": [
            {
              "key": "count",
              "value": "0"
            },
            {
              "key": "distance",
              "value": "0.0"
            },
            {
              "key": "disabled",
              "value": "no"
            }
          ]
        }
      ],
      "features": [
        "empty_keys",
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_lenient"
      ],
      "inputs": [
        "count = 0\ndistance = 0.0\ndisabled = no"
      ]
    },
    {
      "name": "parse_zero_values_strict_literal",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "count",
              "value": "0"
            },
            {
              "key": "distance",
              "value": "0.0"
            },
            {
              "key": "disabled",
              "value": "no"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "count": "0",
            "disabled": "no",
            "distance": "0.0"
          }
        },
        {
          "function": "get_int",
          "expect": 0,
          "args": [
            "count"
          ]
        },
        {
          "function": "get_float",
          "expect": 0,
          "args": [
            "distance"
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "disabled"
          ]
        }
      ],
      "features": [
        "empty_keys",
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "count = 0\ndistance = 0.0\ndisabled = no"
      ]
    },
    {
      "name": "parse_boolean_variants",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "flag1",
              "value": "yes"
            },
            {
              "key": "flag2",
              "value": "on"
            },
            {
              "key": "flag3",
              "value": "1"
            },
            {
              "key": "flag4",
              "value": "false"
            },
            {
              "key": "flag5",
              "value": "no"
            },
            {
              "key": "flag6",
              "value": "off"
            },
            {
              "key": "flag7",
              "value": "0"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "flag1": "yes",
            "flag2": "on",
            "flag3": "1",
            "flag4": "false",
            "flag5": "no",
            "flag6": "off",
            "flag7": "0"
          }
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "flag1"
          ]
        },
        {
          "function": "get_int",
          "expect": 1,
          "args": [
            "flag3"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_lenient"
      ],
      "inputs": [
        "flag1 = yes\nflag2 = on\nflag3 = 1\nflag4 = false\nflag5 = no\nflag6 = off\nflag7 = 0"
      ]
    },
    {
      "name": "parse_boolean_variants_strict_literal",
      "tests": [
        {
          "function": "get_int",
          "expect": 1,
          "args": [
            "flag3"
          ]
        },
        {
          "function": "parse",
          "expect": [
            {
              "key": "flag1",
              "value": "yes"
            },
            {
              "key": "flag2",
              "value": "on"
            },
            {
              "key": "flag3",
              "value": "1"
            },
            {
              "key": "flag4",
              "value": "false"
            },
            {
              "key": "flag5",
              "value": "no"
            },
            {
              "key": "flag6",
              "value": "off"
            },
            {
              "key": "flag7",
              "value": "0"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "flag1": "yes",
            "flag2": "on",
            "flag3": "1",
            "flag4": "false",
            "flag5": "no",
            "flag6": "off",
            "flag7": "0"
          }
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "flag1"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "flag1 = yes\nflag2 = on\nflag3 = 1\nflag4 = false\nflag5 = no\nflag6 = off\nflag7 = 0"
      ]
    },
    {
      "name": "parse_mixed_types",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "host",
              "value": "localhost"
            },
            {
              "key": "port",
              "value": "8080"
            },
            {
              "key": "ssl",
              "value": "true"
            },
            {
              "key": "timeout",
              "value": "30.5"
            },
            {
              "key": "debug",
              "value": "off"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "debug": "off",
            "host": "localhost",
            "port": "8080",
            "ssl": "true",
            "timeout": "30.5"
          }
        },
        {
          "function": "get_string",
          "expect": "localhost",
          "args": [
            "host"
          ]
        },
        {
          "function": "get_int",
          "expect": 8080,
          "args": [
            "port"
          ]
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "ssl"
          ]
        },
        {
          "function": "get_float",
          "expect": 30.5,
          "args": [
            "timeout"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_lenient"
      ],
      "inputs": [
        "host = localhost\nport = 8080\nssl = true\ntimeout = 30.5\ndebug = off"
      ]
    },
    {
      "name": "parse_mixed_types_strict_literal",
      "tests": [
        {
          "function": "build_hierarchy",
          "expect": {
            "debug": "off",
            "host": "localhost",
            "port": "8080",
            "ssl": "true",
            "timeout": "30.5"
          }
        },
        {
          "function": "get_string",
          "expect": "localhost",
          "args": [
            "host"
          ]
        },
        {
          "function": "get_int",
          "expect": 8080,
          "args": [
            "port"
          ]
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "ssl"
          ]
        },
        {
          "function": "get_float",
          "expect": 30.5,
          "args": [
            "timeout"
          ]
        },
        {
          "function": "parse",
          "expect": [
            {
              "key": "host",
              "value": "localhost"
            },
            {
              "key": "port",
              "value": "8080"
            },
            {
              "key": "ssl",
              "value": "true"
            },
            {
              "key": "timeout",
              "value": "30.5"
            },
            {
              "key": "debug",
              "value": "off"
            }
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "host = localhost\nport = 8080\nssl = true\ntimeout = 30.5\ndebug = off"
      ]
    },
    {
      "name": "parse_with_whitespace",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "number",
              "value": "42"
            },
            {
              "key": "flag",
              "value": "true"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "flag": "true",
            "number": "42"
          }
        },
        {
          "function": "get_int",
          "expect": 42,
          "args": [
            "number"
          ]
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "flag"
          ]
        }
      ],
      "features": [
        "whitespace",
        "optional_typed_accessors"
      ],
      "inputs": [
        "number =   42   \nflag =  true  "
      ]
    },
    {
      "name": "parse_with_conservative_options",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "number",
              "value": "42"
            },
            {
              "key": "decimal",
              "value": "3.14"
            },
            {
              "key": "flag",
              "value": "true"
            },
            {
              "key": "text",
              "value": "hello"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "decimal": "3.14",
            "flag": "true",
            "number": "42",
            "text": "hello"
          }
        },
        {
          "function": "get_int",
          "expect": 42,
          "args": [
            "number"
          ]
        },
        {
          "function": "get_string",
          "expect": "3.14",
          "args": [
            "decimal"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "number = 42\ndecimal = 3.14\nflag = true\ntext = hello"
      ]
    },
    {
      "name": "parse_integer_error",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "port",
              "value": "not_a_number"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "port": "not_a_number"
          }
        },
        {
          "function": "get_int",
          "expect": null,
          "args": [
            "port"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "port = not_a_number"
      ]
    },
    {
      "name": "parse_float_error",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "temperature",
              "value": "invalid"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "temperature": "invalid"
          }
        },
        {
          "function": "get_float",
          "expect": null,
          "args": [
            "temperature"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "temperature = invalid"
      ]
    },
    {
      "name": "parse_boolean_error",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "enabled",
              "value": "maybe"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "enabled": "maybe"
          }
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "enabled"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "enabled = maybe"
      ]
    },
    {
      "name": "parse_missing_path_error",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "existing",
              "value": "value"
            }
          ]
        },
        {
          "function": "build_hierarchy",
          "expect": {
            "existing": "value"
          }
        },
        {
          "function": "get_string",
          "expect": null,
          "args": [
            "missing"
          ]
        }
      ],
      "inputs": [
        "existing = value"
      ]
    },
    {
      "name": "boolean_case_sensitivity_uppercase",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "upper_true",
              "value": "TRUE"
            },
            {
              "key": "upper_false",
              "value": "FALSE"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "upper_true"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "upper_true = TRUE\nupper_false = FALSE"
      ]
    },
    {
      "name": "boolean_case_sensitivity_mixed",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "mixed_true",
              "value": "True"
            },
            {
              "key": "mixed_false",
              "value": "False"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "mixed_true"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "mixed_true = True\nmixed_false = False"
      ]
    },
    {
      "name": "boolean_lenient_uppercase_yes_no",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "upper_yes",
              "value": "YES"
            },
            {
              "key": "upper_no",
              "value": "NO"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "upper_yes"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_lenient"
      ],
      "inputs": [
        "upper_yes = YES\nupper_no = NO"
      ]
    },
    {
      "name": "boolean_numeric_one_zero_strict",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "one",
              "value": "1"
            },
            {
              "key": "zero",
              "value": "0"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "one"
          ]
        },
        {
          "function": "get_int",
          "expect": 1,
          "args": [
            "one"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "one = 1\nzero = 0"
      ]
    },
    {
      "name": "boolean_with_whitespace",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "padded",
              "value": "true"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": true,
          "args": [
            "padded"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors",
        "whitespace"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "padded =   true   "
      ]
    },
    {
      "name": "boolean_nested_object",
      "tests": [
        {
          "function": "build_hierarchy",
          "expect": {
            "config": {
              "debug": "true",
              "verbose": "false",
              "experimental": "yes"
            }
          }
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "config =\n  debug = true\n  verbose = false\n  experimental = yes"
      ]
    },
    {
      "name": "type_mismatch_get_int_on_bool",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "flag",
              "value": "true"
            }
          ]
        },
        {
          "function": "get_int",
          "expect": null,
          "args": [
            "flag"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "flag = true"
      ]
    },
    {
      "name": "type_mismatch_get_bool_on_int",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "number",
              "value": "42"
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "number"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "number = 42"
      ]
    },
    {
      "name": "type_mismatch_get_float_on_bool",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "flag",
              "value": "false"
            }
          ]
        },
        {
          "function": "get_float",
          "expect": null,
          "args": [
            "flag"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "flag = false"
      ]
    },
    {
      "name": "type_mismatch_nested_path",
      "tests": [
        {
          "function": "build_hierarchy",
          "expect": {
            "config": {
              "name": "test",
              "count": "abc"
            }
          }
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "inputs": [
        "config =\n  name = test\n  count = abc"
      ]
    },
    {
      "name": "boolean_empty_value_error",
      "tests": [
        {
          "function": "parse",
          "expect": [
            {
              "key": "empty",
              "value": ""
            }
          ]
        },
        {
          "function": "get_bool",
          "expect": null,
          "args": [
            "empty"
          ]
        }
      ],
      "features": [
        "optional_typed_accessors"
      ],
      "behaviors": [
        "boolean_strict"
      ],
      "inputs": [
        "empty ="
      ]
    }
  ]
}
