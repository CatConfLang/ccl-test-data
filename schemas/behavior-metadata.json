{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ccl.tylerbutler.com/schemas/behavior-metadata.json",
  "title": "CCL Behavior Metadata",
  "description": "Metadata about CCL behaviors including function affinity and mutual exclusivity. Used by the generator to filter behaviors to only the functions they affect.",

  "behaviors": {
    "boolean_strict": {
      "description": "Only 'true' and 'false' (case-sensitive) are valid boolean values. Other values like 'yes', 'no', '1', '0' return errors from get_bool.",
      "affectedFunctions": ["get_bool"],
      "mutuallyExclusiveWith": ["boolean_lenient"]
    },
    "boolean_lenient": {
      "description": "Accept various boolean representations: 'true'/'false', 'yes'/'no', '1'/'0', 'on'/'off' (case-insensitive).",
      "affectedFunctions": ["get_bool"],
      "mutuallyExclusiveWith": ["boolean_strict"]
    },

    "crlf_normalize_to_lf": {
      "description": "Normalize CRLF (\\r\\n) line endings to LF (\\n) during parsing. Affects all text processing.",
      "affectedFunctions": [
        "parse",
        "parse_indented",
        "build_hierarchy",
        "canonical_format",
        "load",
        "round_trip"
      ],
      "mutuallyExclusiveWith": ["crlf_preserve_literal"]
    },
    "crlf_preserve_literal": {
      "description": "Preserve CRLF (\\r\\n) line endings literally without normalization.",
      "affectedFunctions": [
        "parse",
        "parse_indented",
        "build_hierarchy",
        "canonical_format",
        "load",
        "round_trip"
      ],
      "mutuallyExclusiveWith": ["crlf_normalize_to_lf"]
    },

    "tabs_as_content": {
      "description": "Treat tab characters as content, not whitespace. Tabs in values are preserved literally.",
      "affectedFunctions": [
        "parse",
        "parse_indented",
        "build_hierarchy",
        "get_string",
        "canonical_format"
      ],
      "mutuallyExclusiveWith": ["tabs_as_whitespace"]
    },
    "tabs_as_whitespace": {
      "description": "Treat tab characters as whitespace for indentation purposes.",
      "affectedFunctions": [
        "parse",
        "parse_indented",
        "build_hierarchy",
        "canonical_format"
      ],
      "mutuallyExclusiveWith": ["tabs_as_content"]
    },

    "indent_spaces": {
      "description": "Use spaces for indentation in formatted output.",
      "affectedFunctions": [
        "canonical_format",
        "print",
        "round_trip"
      ],
      "mutuallyExclusiveWith": ["indent_tabs"]
    },
    "indent_tabs": {
      "description": "Use tabs for indentation in formatted output.",
      "affectedFunctions": [
        "canonical_format",
        "print",
        "round_trip"
      ],
      "mutuallyExclusiveWith": ["indent_spaces"]
    },

    "list_coercion_enabled": {
      "description": "Single values are coerced to single-element lists when accessed via get_list.",
      "affectedFunctions": ["get_list"],
      "mutuallyExclusiveWith": ["list_coercion_disabled"]
    },
    "list_coercion_disabled": {
      "description": "Single values return an error when accessed via get_list (strict list typing).",
      "affectedFunctions": ["get_list"],
      "mutuallyExclusiveWith": ["list_coercion_enabled"]
    },

    "array_order_insertion": {
      "description": "Arrays/lists preserve insertion order when building hierarchy.",
      "affectedFunctions": [
        "build_hierarchy",
        "get_list"
      ],
      "mutuallyExclusiveWith": ["array_order_lexicographic"]
    },
    "array_order_lexicographic": {
      "description": "Arrays/lists are sorted lexicographically when building hierarchy.",
      "affectedFunctions": [
        "build_hierarchy",
        "get_list"
      ],
      "mutuallyExclusiveWith": ["array_order_insertion"]
    },

    "toplevel_indent_strip": {
      "description": "Strip common leading indentation from top-level values (like Python's textwrap.dedent).",
      "affectedFunctions": [
        "parse_indented",
        "build_hierarchy"
      ],
      "mutuallyExclusiveWith": ["toplevel_indent_preserve"]
    },
    "toplevel_indent_preserve": {
      "description": "Preserve indentation of top-level values exactly as written.",
      "affectedFunctions": [
        "parse_indented",
        "build_hierarchy"
      ],
      "mutuallyExclusiveWith": ["toplevel_indent_strip"]
    }
  },

  "defaults": {
    "unmappedBehavior": "global",
    "description": "Behaviors not listed in this file are considered 'global' and apply to all functions."
  }
}
